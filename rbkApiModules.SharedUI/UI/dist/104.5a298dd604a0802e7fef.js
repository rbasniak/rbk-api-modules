(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[104],{104:(t,e,a)=>{"use strict";a.r(e),a.d(e,{SearchModule:()=>V});var s=a(2561),n=a(1116),i=a(4605),r=a(8863),o=a(3027),l=a(6726),p=a(4762),c=a(3623),u=a(2995),d=a(3063),g=a(888);let m=(()=>{class t{static all(t){return(0,d.Z)(t.data)}static sources(t){return null==t.lastUpdated?this.noDataOptions:t.data.sources.map(t=>({id:t,name:""===t||null==t?"Without source":t}))}static operatingSystems(t){return null==t.lastUpdated?this.noDataOptions:t.data.operatingSystems.map(t=>({id:t,name:""===t||null==t?"Without operating system":t}))}static messages(t){return null==t.lastUpdated?this.noDataOptions:t.data.messages.map(t=>({id:t,name:""===t||null==t?"Without message":t}))}static layers(t){return null==t.lastUpdated?this.noDataOptions:t.data.layers.map(t=>({id:t,name:""===t||null==t?"Without application layer":t}))}static devices(t){return null==t.lastUpdated?this.noDataOptions:t.data.devices.map(t=>({id:t,name:""===t||null==t?"Without device":t}))}static browsers(t){return null==t.lastUpdated?this.noDataOptions:t.data.browsers.map(t=>({id:t,name:""===t||null==t?"Without browser":t}))}static versions(t){return null==t.lastUpdated?this.noDataOptions:t.data.versions.map(t=>({id:t,name:""===t||null==t?"Without version":t}))}static areas(t){return null==t.lastUpdated?this.noDataOptions:t.data.areas.map(t=>({id:t,name:""===t||null==t?"Without area":t}))}static domains(t){return null==t.lastUpdated?this.noDataOptions:t.data.domains.map(t=>({id:t,name:""===t||null==t?"Without domain":t}))}static users(t){return null==t.lastUpdated?this.noDataOptions:t.data.users.map(t=>({id:t,name:""===t||null==t?"Without user":t}))}static userAgents(t){return null==t.lastUpdated?this.noDataOptions:t.data.agents.map(t=>({id:t,name:""===t||null==t?"Without user agent":t}))}}return t.noDataOptions=[{id:null,name:"No data available"}],(0,p.gn)([(0,u.Qf)([g.D])],t,"all",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"sources",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"operatingSystems",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"messages",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"layers",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"devices",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"browsers",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"versions",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"areas",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"domains",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"users",null),(0,p.gn)([(0,u.Qf)([g.D])],t,"userAgents",null),t})();var f=a(6820),h=a(779);let x=(()=>{class t{static results(t){return t.data.searchResults.map(t=>Object.assign(Object.assign({},t),{responseSize:Math.round(t.responseSize/1024*10)/10,requestSize:Math.round(t.requestSize/1024*10)/10}))}static charts(t){return(0,d.Z)(t.data.charts)}}return(0,p.gn)([(0,u.Qf)([h.T])],t,"results",null),(0,p.gn)([(0,u.Qf)([h.T])],t,"charts",null),t})();var Z=a(9609),y=a(5366),w=a(8203),A=a(2290);let T=(()=>{class t{transform(t,...e){var a;return null!=t&&""!==t?t:null!==(a=e[0])&&void 0!==a?a:"-"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=y.Yjl({name:"emptyGuard",type:t,pure:!0}),t})(),q=(()=>{class t{transform(t,...e){if(null==t)return null;const a=null==t?void 0:t.split(/(?:\r\n|\r|\n)/g);let s=a[0];return s.length>e[0]&&(s=s.substring(0,e[0])+"..."),a.length>1&&(s+="[click to expand]"),s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=y.Yjl({name:"formatHtml",type:t,pure:!0}),t})();function U(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"smz-ui-chart",10),y._UZ(2,"smz-ui-chart",10),y._UZ(3,"smz-ui-chart",10),y._UZ(4,"smz-ui-chart",10),y._UZ(5,"smz-ui-chart",10),y._UZ(6,"smz-ui-chart",10),y._UZ(7,"smz-ui-chart",10),y._UZ(8,"smz-ui-chart",10),y.BQk()),2&t){const t=e.ngIf;y.xp6(1),y.Q6J("type",t[0].chart.type)("options",t[0].chart.config)("data",t[0].chart.data),y.xp6(1),y.Q6J("type",t[1].chart.type)("options",t[1].chart.config)("data",t[1].chart.data),y.xp6(1),y.Q6J("type",t[2].chart.type)("options",t[2].chart.config)("data",t[2].chart.data),y.xp6(1),y.Q6J("type",t[3].chart.type)("options",t[3].chart.config)("data",t[3].chart.data),y.xp6(1),y.Q6J("type",t[4].chart.type)("options",t[4].chart.config)("data",t[4].chart.data),y.xp6(1),y.Q6J("type",t[5].chart.type)("options",t[5].chart.config)("data",t[5].chart.data),y.xp6(1),y.Q6J("type",t[6].chart.type)("options",t[6].chart.config)("data",t[6].chart.data),y.xp6(1),y.Q6J("type",t[7].chart.type)("options",t[7].chart.config)("data",t[7].chart.data)}}function L(t,e){if(1&t&&(y.TgZ(0,"div",7),y.TgZ(1,"p-panel",8),y.TgZ(2,"div",9),y.YNc(3,U,9,24,"ng-container",5),y.ALo(4,"async"),y.qZA(),y.qZA(),y.qZA()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("toggleable",!0),y.xp6(2),y.Q6J("ngIf",y.lcZ(4,2,t.charts$))}}function v(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"span",41),y._uU(2),y.qZA(),y.BQk()),2&t){const t=y.oxw(3).$implicit;y.xp6(2),y.Oqu(t.exceptionMessage)}}function _(t,e){if(1&t&&(y.TgZ(0,"span",41),y._uU(1),y.ALo(2,"formatHtml"),y.qZA()),2&t){const t=y.oxw(3).$implicit;y.xp6(1),y.Oqu(y.xi3(2,1,t.exceptionMessage,175))}}function b(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",36),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2).$implicit;return y.oxw(3).toggleExpansion(e,"message")}),y.TgZ(1,"div",37),y.TgZ(2,"span"),y._UZ(3,"i",38),y._uU(4,"Stacktrace"),y.qZA(),y.YNc(5,v,3,1,"ng-container",39),y.YNc(6,_,3,4,"ng-template",null,40,y.W1O),y.qZA(),y.qZA()}if(2&t){const t=y.MAs(7),e=y.oxw(2).$implicit;y.xp6(5),y.Q6J("ngIf",1==e.messageExpanded)("ngIfElse",t)}}function S(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"span",43),y._uU(2),y.qZA(),y.BQk()),2&t){const t=y.oxw(3).$implicit;y.xp6(2),y.Oqu(t.stackTrace)}}function E(t,e){if(1&t&&(y.TgZ(0,"span",43),y._uU(1),y.ALo(2,"formatHtml"),y.qZA()),2&t){const t=y.oxw(3).$implicit;y.xp6(1),y.Oqu(y.xi3(2,1,t.stackTrace,175))}}function O(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",36),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2).$implicit;return y.oxw(3).toggleExpansion(e,"stacktrace")}),y.TgZ(1,"div",37),y.TgZ(2,"span"),y._UZ(3,"i",38),y._uU(4,"Message"),y.qZA(),y.YNc(5,S,3,1,"ng-container",39),y.YNc(6,E,3,4,"ng-template",null,42,y.W1O),y.qZA(),y.qZA()}if(2&t){const t=y.MAs(7),e=y.oxw(2).$implicit;y.xp6(5),y.Q6J("ngIf",1==e.stacktraceExpanded)("ngIfElse",t)}}function I(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"span",43),y._uU(2),y.qZA(),y.BQk()),2&t){const t=y.oxw(3).$implicit;y.xp6(2),y.Oqu(t.inputData)}}function Q(t,e){if(1&t&&(y.TgZ(0,"span",43),y._uU(1),y.qZA()),2&t){const t=y.oxw(6);y.xp6(1),y.Oqu(t.emptyObject)}}function D(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",44),y.NdJ("click",function(){y.CHM(t);const e=y.oxw(2).$implicit;return y.oxw(3).toggleExpansion(e,"input")}),y.TgZ(1,"div",37),y.TgZ(2,"span"),y._UZ(3,"i",38),y._uU(4,"Input data"),y.qZA(),y.YNc(5,I,3,1,"ng-container",39),y.YNc(6,Q,2,1,"ng-template",null,45,y.W1O),y.qZA(),y.qZA()}if(2&t){const t=y.MAs(7),e=y.oxw(2).$implicit;y.xp6(5),y.Q6J("ngIf",1==e.inputExpanded)("ngIfElse",t)}}function N(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",15),y.TgZ(2,"div",16),y.TgZ(3,"div",17),y.TgZ(4,"span"),y._UZ(5,"i",18),y._uU(6),y.ALo(7,"date"),y.qZA(),y.TgZ(8,"span"),y._UZ(9,"i",19),y._uU(10),y.ALo(11,"date"),y.qZA(),y.qZA(),y.TgZ(12,"div",20),y.TgZ(13,"span"),y._UZ(14,"i",21),y._uU(15),y.ALo(16,"emptyGuard"),y.qZA(),y.TgZ(17,"span"),y._UZ(18,"i",22),y._uU(19),y.ALo(20,"emptyGuard"),y.qZA(),y.TgZ(21,"span"),y._UZ(22,"i",23),y._uU(23),y.ALo(24,"emptyGuard"),y.qZA(),y.qZA(),y.TgZ(25,"div",24),y.TgZ(26,"span"),y._UZ(27,"i",25),y._uU(28),y.ALo(29,"emptyGuard"),y.qZA(),y.TgZ(30,"span"),y._UZ(31,"i",26),y._uU(32),y.ALo(33,"emptyGuard"),y.qZA(),y.TgZ(34,"span"),y._UZ(35,"i",27),y._uU(36),y.ALo(37,"emptyGuard"),y.qZA(),y.qZA(),y.TgZ(38,"div",20),y.TgZ(39,"span"),y._UZ(40,"i",28),y._uU(41),y.ALo(42,"emptyGuard"),y.qZA(),y.TgZ(43,"span"),y._UZ(44,"i",29),y._uU(45),y.ALo(46,"emptyGuard"),y.qZA(),y.qZA(),y.TgZ(47,"div",30),y.TgZ(48,"span",31),y._UZ(49,"i",32),y._uU(50),y.ALo(51,"formatHtml"),y.qZA(),y.TgZ(52,"span",31),y._UZ(53,"i",33),y._uU(54),y.ALo(55,"emptyGuard"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.YNc(56,b,8,2,"div",34),y.YNc(57,O,8,2,"div",34),y.YNc(58,D,8,2,"div",35),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(6),y.Oqu(y.xi3(7,16,t.timestamp,"dd/MM/yyyy")),y.xp6(4),y.Oqu(y.xi3(11,19,t.timestamp,"HH:mm:ss")),y.xp6(5),y.Oqu(y.xi3(16,22,t.applicationVersion,"-")),y.xp6(4),y.Oqu(y.xi3(20,25,t.applicationLayer,"-")),y.xp6(4),y.Oqu(y.xi3(24,28,t.applicationArea,"-")),y.xp6(5),y.Oqu(y.xi3(29,31,t.clientDevice,"-")),y.xp6(4),y.AsE("",y.xi3(33,34,t.clientOperatingSystem,"-")," - ",t.clientOperatingSystemVersion,""),y.xp6(4),y.Oqu(y.xi3(37,37,null==t.clientBrowser?null:t.clientBrowser.split(".")[0],"-")),y.xp6(5),y.Oqu(y.xi3(42,40,t.username,"Anonymous")),y.xp6(4),y.Oqu(y.xi3(46,43,t.domain,"Without domain")),y.xp6(5),y.Oqu(y.xi3(51,46,t.exceptionSource,175)),y.xp6(4),y.Oqu(y.xi3(55,49,t.extraData,"-")),y.xp6(2),y.Q6J("ngIf",null!=t.exceptionMessage&&""!==t.exceptionMessage),y.xp6(1),y.Q6J("ngIf",null!=t.stackTrace&&""!==t.stackTrace),y.xp6(1),y.Q6J("ngIf",null!=t.inputData&&""!==t.inputData)}}function k(t,e){1&t&&(y.ynx(0,13),y.YNc(1,N,59,52,"ng-container",14),y.BQk()),2&t&&(y.Q6J("ngSwitch",e.col.field),y.xp6(1),y.Q6J("ngSwitchCase","timestamp"))}function M(t,e){if(1&t&&(y.TgZ(0,"div",7),y.TgZ(1,"smz-ui-table",11),y.YNc(2,k,2,2,"ng-template",12),y.qZA(),y.qZA()),2&t){const t=y.oxw().ngIf,e=y.oxw();y.xp6(1),y.Q6J("items",t)("state",e.tableConfig)}}function C(t,e){if(1&t&&(y.ynx(0),y.YNc(1,L,5,4,"div",6),y.YNc(2,M,3,2,"div",6),y.BQk()),2&t){const t=e.ngIf;y.xp6(1),y.Q6J("ngIf",null!=t&&t.length>0),y.xp6(1),y.Q6J("ngIf",null!=t&&t.length>0)}}const J=Z;let F=(()=>{let t=class{constructor(t){this.store=t,this.formConfig=null,this.tableConfig=null,this.emptyObject="{...}"}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new i.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).useStrippedStyle().columns().custom("timestamp","RESULTS","9em").disableFilter().disableSort().columns.table.build()}setupForm(){const t={propertyName:"dateFrom",type:o.rc.CALENDAR,name:"From",defaultValue:J(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},e={propertyName:"dateTo",type:o.rc.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"versions",type:o.rc.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.versions),template:{extraLarge:{row:"col-2"}}},s={propertyName:"layers",type:o.rc.MULTI_SELECT,name:"Layers",validatorsPreset:{isRequired:!1},defaultLabel:"All application layers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.layers),template:{extraLarge:{row:"col-2"}}},n={propertyName:"areas",type:o.rc.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.areas),template:{extraLarge:{row:"col-2"}}},i={propertyName:"domains",type:o.rc.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.domains),template:{extraLarge:{row:"col-2"}}},r={propertyName:"users",type:o.rc.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.users),template:{extraLarge:{row:"col-2"}}},l={propertyName:"browsers",type:o.rc.MULTI_SELECT,name:"Browsers",validatorsPreset:{isRequired:!1},defaultLabel:"All browsers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.browsers),template:{extraLarge:{row:"col-3"}}},p={propertyName:"agents",type:o.rc.MULTI_SELECT,name:"User Agents",validatorsPreset:{isRequired:!1},defaultLabel:"All user agents",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.userAgents),template:{extraLarge:{row:"col-3"}}},c={propertyName:"devices",type:o.rc.MULTI_SELECT,name:"Devices",validatorsPreset:{isRequired:!1},defaultLabel:"All devices",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.devices),template:{extraLarge:{row:"col-2"}}},u={propertyName:"operatingSystems",type:o.rc.MULTI_SELECT,name:"Operating Systems",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.operatingSystems),template:{extraLarge:{row:"col-2"}}},d={propertyName:"sources",type:o.rc.MULTI_SELECT,name:"Sources",validatorsPreset:{isRequired:!1},defaultLabel:"All sources",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.sources),template:{extraLarge:{row:"col-3"}}},g={propertyName:"messages",type:o.rc.MULTI_SELECT,name:"Messages",validatorsPreset:{isRequired:!1},defaultLabel:"All messages",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.messages),template:{extraLarge:{row:"col-6"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[t,e,a,s,n,i,r,l,p,c,u,d,g,{propertyName:"text",type:o.rc.TEXT,name:"Contains Text",validatorsPreset:{isRequired:!1},defaultValue:null,template:{extraLarge:{row:"col-3"}}}],template:{extraLarge:{row:"col-12"}}}]}}search(t){const e=t.getData().data;for(const a in e)a.endsWith("Ids")&&(e[a.substring(0,a.length-3)]=e[a],delete e[a]);this.store.dispatch(new f.Z.Search(e))}toggleExpansion(t,e){console.log(t,e),t[`${e}Expanded`]=null==t[`${e}Expanded`]||!t[`${e}Expanded`]}};return t.\u0275fac=function(e){return new(e||t)(y.Y36(u.yh))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-8"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"grid","grid-rows-1"],[1,"grid","grid-cols-12","gap-4"],[1,"grid","grid-rows-3","col-span-1","gap-2"],[1,"far","fa-calendar-alt","icon"],[1,"fas","fa-clock","icon"],[1,"grid","grid-rows-3","col-span-2","gap-2"],[1,"fas","fas","fa-code-branch","icon"],[1,"fas","fa-layer-group","icon"],[1,"fas","fa-sitemap","icon"],[1,"grid","grid-rows-3","col-span-3","gap-2"],[1,"fas","fa-tablet-alt","icon"],[1,"fab","fa-windows","icon"],[1,"fas","fa-globe","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-users","icon"],[1,"grid","grid-rows-3","col-span-4","gap-2"],[1,"break-all"],[1,"fas","fa-project-diagram","icon"],[1,"fas","fa-info-circle","icon"],["class","grid grid-rows-1 cursor-pointer mb-2.5",3,"click",4,"ngIf"],["class","grid grid-rows-1 cursor-pointer",3,"click",4,"ngIf"],[1,"grid","grid-rows-1","cursor-pointer","mb-2.5",3,"click"],[1,"grid","grid-cols-1"],[1,"fas","fa-bug","icon"],[4,"ngIf","ngIfElse"],["elseMessageTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","font-mono","text-sm"],["elseStacktraceTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","text-sm","font-mono"],[1,"grid","grid-rows-1","cursor-pointer",3,"click"],["elseInputTemplate",""]],template:function(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"p-panel",0),y._UZ(1,"smz-form-group",1,2),y.TgZ(3,"div",3),y.TgZ(4,"button",4),y.NdJ("click",function(){y.CHM(t);const a=y.MAs(2);return e.search(a)}),y.qZA(),y.qZA(),y.qZA(),y.YNc(5,C,3,2,"ng-container",5),y.ALo(6,"async")}2&t&&(y.xp6(1),y.Q6J("config",e.formConfig),y.xp6(4),y.Q6J("ngIf",y.lcZ(6,2,e.results$)))},directives:[w.s,o.HK,l.Hq,n.O5,i.ibd,i.aYM,A.jx,n.RF,n.n9],pipes:[n.Ov,n.uU,T,q],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,p.gn)([(0,u.Ph)(x.results)],t.prototype,"results$",void 0),(0,p.gn)([(0,u.Ph)(x.charts)],t.prototype,"charts$",void 0),t=(0,p.gn)([(0,c.c)()],t),t})();var R=a(8751),$=a(3464),P=a(9208);const Y=[{path:"",children:[{path:$.$q+"/"+$.xJ,canActivate:[r.XF],component:F,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[g.O]}}]}];let V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[],imports:[[n.ez,s.Bz.forChild(Y),l.hJ,o.Z4,w.Q,i.P$2,i.Yel,R.d,P.Ie]]}),t})()}}]);
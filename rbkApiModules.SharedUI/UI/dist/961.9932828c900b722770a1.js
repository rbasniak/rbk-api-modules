(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[961],{3961:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SearchModule:()=>X});var a=n(2561),s=n(1116),i=n(2360),o=n(6726),r=n(4762),c=n(3623),l=n(2995),p=n(3210),u=n(9376),f=n(7676),d=n(1817);let g=(()=>{class e{static results(e){return e.data.searchResults.map(e=>Object.assign(Object.assign({},e),{responseSize:Math.round(e.responseSize/1024*10)/10,requestSize:Math.round(e.requestSize/1024*10)/10}))}static charts(e){return(0,f.Z)(e.data.charts)}}return(0,r.gn)([(0,l.Qf)([d.T])],e,"results",null),(0,r.gn)([(0,l.Qf)([d.T])],e,"charts",null),e})();var m=n(9609),h=n(5366),Z=n(8203),x=n(2290);function A(e,t){if(1&e&&(h.ynx(0),h._UZ(1,"smz-ui-chart",10),h._UZ(2,"smz-ui-chart",10),h._UZ(3,"smz-ui-chart",10),h._UZ(4,"smz-ui-chart",10),h.BQk()),2&e){const e=t.ngIf;h.xp6(1),h.Q6J("type",e[0].chart.type)("options",e[0].chart.config)("data",e[0].chart.data),h.xp6(1),h.Q6J("type",e[1].chart.type)("options",e[1].chart.config)("data",e[1].chart.data),h.xp6(1),h.Q6J("type",e[2].chart.type)("options",e[2].chart.config)("data",e[2].chart.data),h.xp6(1),h.Q6J("type",e[3].chart.type)("options",e[3].chart.config)("data",e[3].chart.data)}}function T(e,t){if(1&e&&(h.TgZ(0,"div",7),h.TgZ(1,"p-panel",8),h.TgZ(2,"div",9),h.YNc(3,A,5,12,"ng-container",5),h.ALo(4,"async"),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("toggleable",!0),h.xp6(2),h.Q6J("ngIf",h.lcZ(4,2,e.charts$))}}function w(e,t){1&e&&h._UZ(0,"i",22)}function q(e,t){1&e&&h._UZ(0,"i",23)}function y(e,t){1&e&&h._UZ(0,"i",24)}function U(e,t){1&e&&h._UZ(0,"i",25)}function S(e,t){1&e&&h._UZ(0,"i",26)}function I(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",15),h.TgZ(2,"div",16),h.TgZ(3,"div"),h.YNc(4,w,1,0,"i",17),h.qZA(),h.YNc(5,q,1,0,"i",18),h.YNc(6,y,1,0,"i",19),h.YNc(7,U,1,0,"i",20),h.YNc(8,S,1,0,"i",21),h.qZA(),h.TgZ(9,"div",16),h._uU(10),h.qZA(),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(4),h.Q6J("ngIf",200===e.response||204===e.response),h.xp6(1),h.Q6J("ngIf",400===e.response),h.xp6(1),h.Q6J("ngIf",e.response>=300&&e.response<500&&400!==e.response&&401!==e.response),h.xp6(1),h.Q6J("ngIf",500===e.response),h.xp6(1),h.Q6J("ngIf",401===e.response||403===e.response),h.xp6(2),h.Oqu(e.response)}}function _(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(1),h.Oqu(e.path)}}function b(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",15),h.TgZ(2,"div"),h._uU(3),h.qZA(),h.YNc(4,_,2,1,"div",5),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(3),h.Oqu(e.action),h.xp6(1),h.Q6J("ngIf",(null==e.action?null:e.action.toLowerCase())!==(null==e.path?null:e.path.toLowerCase()))}}function v(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",15),h.TgZ(2,"span"),h._UZ(3,"i",27),h._uU(4),h.ALo(5,"date"),h.qZA(),h.TgZ(6,"span"),h._UZ(7,"i",28),h._uU(8),h.ALo(9,"date"),h.qZA(),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(4),h.Oqu(h.xi3(5,2,e.timestamp,"dd/MM/yyyy")),h.xp6(4),h.Oqu(h.xi3(9,5,e.timestamp,"HH:mm:ss"))}}function Q(e,t){if(1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",30),h._uU(2),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(2),h.Oqu(e.area)}}function L(e,t){if(1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",30),h._uU(2),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(2),h.AsE("",e.area," (",e.domain,")")}}function N(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",15),h.YNc(2,Q,3,1,"span",5),h.YNc(3,L,3,2,"span",5),h.TgZ(4,"span"),h._UZ(5,"i",29),h._uU(6),h.qZA(),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(2),h.Q6J("ngIf",null==e.domain||""==e.domain),h.xp6(1),h.Q6J("ngIf",null!=e.domain&&""!=e.domain),h.xp6(3),h.Oqu(e.version)}}function C(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",15),h.TgZ(2,"span"),h._UZ(3,"i",31),h._uU(4),h.qZA(),h.TgZ(5,"span"),h._UZ(6,"i",32),h._uU(7),h.qZA(),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(4),h.Oqu(null!=e.username&&""!==e.username?e.username:"Anonymous"),h.xp6(3),h.Oqu(e.ipAddress)}}function J(e,t){1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",36),h._uU(2,"-"),h.qZA())}function E(e,t){if(1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",36),h._uU(2),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(2),h.AsE(" ",e.totalTransactionTime,"ms (",e.transactionCount,"x)")}}function z(e,t){1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",37),h._uU(2,"-"),h.qZA())}function F(e,t){if(1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",37),h._uU(2),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(2),h.hij("",e.requestSize," kb")}}function Y(e,t){1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",38),h._uU(2,"-"),h.qZA())}function k(e,t){if(1&e&&(h.TgZ(0,"span"),h._UZ(1,"i",38),h._uU(2),h.qZA()),2&e){const e=h.oxw(2).$implicit;h.xp6(2),h.hij("",e.responseSize," kb")}}function R(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"div",33),h.TgZ(2,"div",34),h.TgZ(3,"span"),h._UZ(4,"i",35),h._uU(5),h.qZA(),h.YNc(6,J,3,0,"span",5),h.YNc(7,E,3,2,"span",5),h.qZA(),h.TgZ(8,"div",15),h.YNc(9,z,3,0,"span",5),h.YNc(10,F,3,1,"span",5),h.YNc(11,Y,3,0,"span",5),h.YNc(12,k,3,1,"span",5),h.qZA(),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit;h.xp6(5),h.hij(" ",e.duration,"ms"),h.xp6(1),h.Q6J("ngIf",null==e.transactionCount||0==e.transactionCount),h.xp6(1),h.Q6J("ngIf",null!=e.transactionCount&&e.transactionCount>0),h.xp6(2),h.Q6J("ngIf",null==e.requestSize||0==e.requestSize),h.xp6(1),h.Q6J("ngIf",null!=e.requestSize&&e.requestSize>0),h.xp6(1),h.Q6J("ngIf",null==e.responseSize||0==e.responseSize),h.xp6(1),h.Q6J("ngIf",null!=e.responseSize&&e.responseSize>0)}}function O(e,t){1&e&&(h.ynx(0,13),h.YNc(1,I,11,6,"ng-container",14),h.YNc(2,b,5,2,"ng-container",14),h.YNc(3,v,10,8,"ng-container",14),h.YNc(4,N,7,3,"ng-container",14),h.YNc(5,C,8,2,"ng-container",14),h.YNc(6,R,13,7,"ng-container",14),h.BQk()),2&e&&(h.Q6J("ngSwitch",t.col.field),h.xp6(1),h.Q6J("ngSwitchCase","response"),h.xp6(1),h.Q6J("ngSwitchCase","action"),h.xp6(1),h.Q6J("ngSwitchCase","timestamp"),h.xp6(1),h.Q6J("ngSwitchCase","application"),h.xp6(1),h.Q6J("ngSwitchCase","user"),h.xp6(1),h.Q6J("ngSwitchCase","performance"))}function P(e,t){if(1&e&&(h.TgZ(0,"div",7),h.TgZ(1,"smz-ui-table",11),h.YNc(2,O,7,7,"ng-template",12),h.qZA(),h.qZA()),2&e){const e=h.oxw().ngIf,t=h.oxw();h.xp6(1),h.Q6J("items",e)("state",t.tableConfig)}}function $(e,t){if(1&e&&(h.ynx(0),h.YNc(1,T,5,4,"div",6),h.YNc(2,P,3,2,"div",6),h.BQk()),2&e){const e=t.ngIf;h.xp6(1),h.Q6J("ngIf",null!=e&&e.length>0),h.xp6(1),h.Q6J("ngIf",null!=e&&e.length>0)}}const M=m;let B=(()=>{let e=class{constructor(e){this.store=e,this.formConfig=null,this.tableConfig=null}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new i.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).columns().custom("response","","4em").ignoreOnGlobalFilter().disableFilter().disableSort().columns.custom("timestamp","TIMESTAMP","9em").disableFilter().disableSort().columns.custom("action","ENDPOINT").disableFilter().disableSort().columns.custom("application","APPLICATION").disableFilter().disableSort().columns.custom("user","USER").disableFilter().disableSort().columns.custom("performance","PERFORMANCE","20em").disableFilter().disableSort().columns.table.build()}setupForm(){const e={propertyName:"dateFrom",type:i.rc7.CALENDAR,name:"From",defaultValue:M(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},t={propertyName:"dateTo",type:i.rc7.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},n={propertyName:"versions",type:i.rc7.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.versions),template:{extraLarge:{row:"col-2"}}},a={propertyName:"areas",type:i.rc7.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.areas),template:{extraLarge:{row:"col-2"}}},s={propertyName:"domains",type:i.rc7.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.domains),template:{extraLarge:{row:"col-2"}}},o={propertyName:"actions",type:i.rc7.MULTI_SELECT,name:"Endpoints",validatorsPreset:{isRequired:!1},defaultLabel:"All endpoints",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.endpoints),template:{extraLarge:{row:"col-3"}}},r={propertyName:"responses",type:i.rc7.MULTI_SELECT,name:"Responses",validatorsPreset:{isRequired:!1},defaultLabel:"All responses",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.responses),template:{extraLarge:{row:"col-2"}}},c={propertyName:"users",type:i.rc7.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.users),template:{extraLarge:{row:"col-2"}}},l={propertyName:"agents",type:i.rc7.MULTI_SELECT,name:"User Agents",validatorsPreset:{isRequired:!1},defaultLabel:"All user agents",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(p.z.userAgents),template:{extraLarge:{row:"col-4"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[e,t,n,a,s,c,o,r,l,{propertyName:"entityId",type:i.rc7.TEXT,name:"Entity Id",validatorsPreset:{isRequired:!1},defaultValue:null,template:{extraLarge:{row:"col-3"}}}],template:{extraLarge:{row:"col-12"}}}]}}search(e){const t=e.getData().data;for(const n in t)n.endsWith("Ids")&&(t[n.substring(0,n.length-3)]=t[n],delete t[n]);this.store.dispatch(new u.Z.Search(t))}};return e.\u0275fac=function(t){return new(t||e)(h.Y36(l.yh))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-4"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"p-d-flex","p-flex-column"],[1,"p-d-flex","p-jc-center"],["class","fas fa-check-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-question-circle",4,"ngIf"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-shield-alt",4,"ngIf"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-question-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-shield-alt"],[1,"far","fa-calendar-alt","icon"],[1,"far","fa-clock","icon"],[1,"fas","fa-code-branch","icon"],[1,"fas","fa-laptop-code","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-network-wired","icon"],[1,"grid","grid-cols-2"],[1,"p-d-flex","p-flex-column","p-mr-6"],[1,"fas","fa-microchip","icon"],[1,"fas","fa-database","icon"],[1,"fas","fa-upload","icon"],[1,"fas","fa-download","icon"]],template:function(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"p-panel",0),h._UZ(1,"smz-form-group",1,2),h.TgZ(3,"div",3),h.TgZ(4,"button",4),h.NdJ("click",function(){h.CHM(e);const n=h.MAs(2);return t.search(n)}),h.qZA(),h.qZA(),h.qZA(),h.YNc(5,$,3,2,"ng-container",5),h.ALo(6,"async")}2&e&&(h.xp6(1),h.Q6J("config",t.formConfig),h.xp6(4),h.Q6J("ngIf",h.lcZ(6,2,t.results$)))},directives:[Z.s,i.HK$,o.Hq,s.O5,i.Tmf,i.aYM,x.jx,s.RF,s.n9],pipes:[s.Ov,s.uU],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,r.gn)([(0,l.Ph)(g.results)],e.prototype,"results$",void 0),(0,r.gn)([(0,l.Ph)(g.charts)],e.prototype,"charts$",void 0),e=(0,r.gn)([(0,c.c)()],e),e})();var V=n(8559),D=n(8751),j=n(3464);const H=[{path:"",children:[{path:j.R3+"/"+j.xJ,canActivate:[i.XFF],component:B,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[V.S]}}]}];let X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[],imports:[[s.ez,a.Bz.forChild(H),o.hJ,i.Z4r,Z.Q,i.P$2,i.Yel,D.d]]}),e})()}}]);
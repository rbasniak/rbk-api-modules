(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[149],{6149:(t,e,a)=>{"use strict";a.r(e),a.d(e,{SearchModule:()=>Y});var n,s=a(2561),r=a(1116),o=a(1039),i=a(6726),l=a(4762),p=a(3623),c=a(2995),u=function(t){return t[t.Warning=0]="Warning",t[t.Error=1]="Error",t[t.Debug=2]="Debug",t}({}),d=a(7676),g=a(6599);!function(t){class e{}e.type="[Logs] Load Filtering Options",t.LoadAll=e}(n||(n={}));var m=a(5366),h=a(6080);const f="logsFilteringOptions";let y=(()=>{let t=class{constructor(t,e){this.logs=t,this.store=e}loadAll$(t){return this.logs.getFilteringOptions().pipe((0,g.b)(e=>{t.patchState({lastUpdated:new Date,data:e})}))}};return t.\u0275fac=function(e){return new(e||t)(m.LFG(h.P),m.LFG(c.yh))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),(0,l.gn)([(0,c.aU)(n.LoadAll)],t.prototype,"loadAll$",null),t=(0,l.gn)([(0,c.ZM)({name:f,defaults:{lastUpdated:null,data:null}})],t),t})(),Z=(()=>{class t{static all(t){return(0,d.Z)(t.data)}static messages(t){return null==t.lastUpdated?this.noDataOptions:t.data.messages.map(t=>({id:t,name:""===t||null==t?"Without message":t}))}static levels(t){return null==t.lastUpdated?this.noDataOptions:t.data.levels.map(t=>t===u.Warning?{id:t,name:"Warning"}:t===u.Error?{id:t,name:"Error"}:t===u.Debug?{id:t,name:"Debug"}:{id:-1,name:"Without level"})}static layers(t){return null==t.lastUpdated?this.noDataOptions:t.data.layers.map(t=>({id:t,name:""===t||null==t?"Without application layer":t}))}static areas(t){return null==t.lastUpdated?this.noDataOptions:t.data.areas.map(t=>({id:t,name:""===t||null==t?"Without area":t}))}static versions(t){return null==t.lastUpdated?this.noDataOptions:t.data.versions.map(t=>({id:t,name:""===t||null==t?"Without version":t}))}static sources(t){return null==t.lastUpdated?this.noDataOptions:t.data.sources.map(t=>({id:t,name:""===t||null==t?"Without source":t}))}static enviroments(t){return null==t.lastUpdated?this.noDataOptions:t.data.enviroments.map(t=>({id:t,name:""===t||null==t?"Without enviroment":t}))}static enviromentsVersions(t){return null==t.lastUpdated?this.noDataOptions:t.data.enviromentsVersions.map(t=>({id:t,name:""===t||null==t?"Without enviroment version":t}))}static users(t){return null==t.lastUpdated?this.noDataOptions:t.data.users.map(t=>({id:t,name:""===t||null==t?"Without user":t}))}static domains(t){return null==t.lastUpdated?this.noDataOptions:t.data.domains.map(t=>({id:t,name:""===t||null==t?"Without domain":t}))}static machines(t){return null==t.lastUpdated?this.noDataOptions:t.data.machines.map(t=>({id:t,name:""===t||null==t?"Without machine name":t}))}}return t.noDataOptions=[{id:null,name:"No data available"}],(0,l.gn)([(0,c.Qf)([y])],t,"all",null),(0,l.gn)([(0,c.Qf)([y])],t,"messages",null),(0,l.gn)([(0,c.Qf)([y])],t,"levels",null),(0,l.gn)([(0,c.Qf)([y])],t,"layers",null),(0,l.gn)([(0,c.Qf)([y])],t,"areas",null),(0,l.gn)([(0,c.Qf)([y])],t,"versions",null),(0,l.gn)([(0,c.Qf)([y])],t,"sources",null),(0,l.gn)([(0,c.Qf)([y])],t,"enviroments",null),(0,l.gn)([(0,c.Qf)([y])],t,"enviromentsVersions",null),(0,l.gn)([(0,c.Qf)([y])],t,"users",null),(0,l.gn)([(0,c.Qf)([y])],t,"domains",null),(0,l.gn)([(0,c.Qf)([y])],t,"machines",null),t})();var x;!function(t){class e{constructor(t){this.data=t}}e.type="[Logs] Search Entries",t.Search=e}(x||(x={}));let v=(()=>{let t=class{constructor(t){this.logs=t}search$(t,e){return this.logs.search(e.data).pipe((0,g.b)(e=>{t.patchState({data:e})}))}};return t.\u0275fac=function(e){return new(e||t)(m.LFG(h.P))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),(0,l.gn)([(0,c.aU)(x.Search)],t.prototype,"search$",null),t=(0,l.gn)([(0,c.ZM)({name:"logssSearch",defaults:{data:null}})],t),t})(),A=(()=>{class t{static results(t){return t.data.searchResults}static charts(t){return(0,d.Z)(t.data.charts)}}return(0,l.gn)([(0,c.Qf)([v])],t,"results",null),(0,l.gn)([(0,c.Qf)([v])],t,"charts",null),t})();var w=a(9609),L=a(8203),U=a(2290);let T=(()=>{class t{transform(t,...e){var a;return null!=t&&""!==t?t:null!==(a=e[0])&&void 0!==a?a:"-"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Yjl({name:"emptyGuard",type:t,pure:!0}),t})(),q=(()=>{class t{transform(t,...e){if(null==t)return null;const a=null==t?void 0:t.split(/(?:\r\n|\r|\n)/g);let n=a[0];return n.length>e[0]&&(n=n.substring(0,e[0])+"..."),a.length>1&&(n+="[click to expand]"),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Yjl({name:"formatHtml",type:t,pure:!0}),t})(),_=(()=>{class t{transform(t){return t===u.Warning?"Warning":t===u.Error?"Error":t===u.Debug?"Debug":"Without level"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Yjl({name:"formatLevel",type:t,pure:!0}),t})();function b(t,e){if(1&t&&(m.ynx(0),m._UZ(1,"smz-ui-chart",10),m._UZ(2,"smz-ui-chart",10),m._UZ(3,"smz-ui-chart",10),m._UZ(4,"smz-ui-chart",10),m._UZ(5,"smz-ui-chart",10),m._UZ(6,"smz-ui-chart",10),m._UZ(7,"smz-ui-chart",10),m._UZ(8,"smz-ui-chart",10),m.BQk()),2&t){const t=e.ngIf;m.xp6(1),m.Q6J("type",t[0].chart.type)("options",t[0].chart.config)("data",t[0].chart.data),m.xp6(1),m.Q6J("type",t[1].chart.type)("options",t[1].chart.config)("data",t[1].chart.data),m.xp6(1),m.Q6J("type",t[2].chart.type)("options",t[2].chart.config)("data",t[2].chart.data),m.xp6(1),m.Q6J("type",t[3].chart.type)("options",t[3].chart.config)("data",t[3].chart.data),m.xp6(1),m.Q6J("type",t[4].chart.type)("options",t[4].chart.config)("data",t[4].chart.data),m.xp6(1),m.Q6J("type",t[5].chart.type)("options",t[5].chart.config)("data",t[5].chart.data),m.xp6(1),m.Q6J("type",t[6].chart.type)("options",t[6].chart.config)("data",t[6].chart.data),m.xp6(1),m.Q6J("type",t[7].chart.type)("options",t[7].chart.config)("data",t[7].chart.data)}}function E(t,e){if(1&t&&(m.TgZ(0,"div",7),m.TgZ(1,"p-panel",8),m.TgZ(2,"div",9),m.YNc(3,b,9,24,"ng-container",5),m.ALo(4,"async"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("toggleable",!0),m.xp6(2),m.Q6J("ngIf",m.lcZ(4,2,t.charts$))}}function S(t,e){1&t&&(m.ynx(0),m.TgZ(1,"span",40),m._uU(2,"{{item.message}"),m.qZA(),m.BQk())}function I(t,e){if(1&t&&(m.TgZ(0,"span",40),m._uU(1),m.ALo(2,"formatHtml"),m.qZA()),2&t){const t=m.oxw(3).$implicit;m.xp6(1),m.Oqu(m.xi3(2,1,t.message,175))}}function Q(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",34),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2).$implicit;return m.oxw(3).toggleExpansion(e,"message")}),m.TgZ(1,"div",35),m.TgZ(2,"span"),m._UZ(3,"i",36),m._uU(4,"Message"),m.qZA(),m.TgZ(5,"span"),m._UZ(6,"i",37),m._uU(7),m.ALo(8,"formatLevel"),m.qZA(),m.YNc(9,S,3,0,"ng-container",38),m.YNc(10,I,3,4,"ng-template",null,39,m.W1O),m.qZA(),m.qZA()}if(2&t){const t=m.MAs(11),e=m.oxw(2).$implicit;m.xp6(7),m.Oqu(m.lcZ(8,3,e.level)),m.xp6(2),m.Q6J("ngIf",1==e.messageExpanded)("ngIfElse",t)}}function O(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"span",44),m._uU(2),m.qZA(),m.BQk()),2&t){const t=m.oxw(3).$implicit;m.xp6(2),m.Oqu(t.inputData)}}function F(t,e){if(1&t&&(m.TgZ(0,"span",44),m._uU(1),m.qZA()),2&t){const t=m.oxw(6);m.xp6(1),m.Oqu(t.emptyObject)}}function N(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",41),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2).$implicit;return m.oxw(3).toggleExpansion(e,"input")}),m.TgZ(1,"div",35),m.TgZ(2,"span"),m._UZ(3,"i",42),m._uU(4,"Input data"),m.qZA(),m.YNc(5,O,3,1,"ng-container",38),m.YNc(6,F,2,1,"ng-template",null,43,m.W1O),m.qZA(),m.qZA()}if(2&t){const t=m.MAs(7),e=m.oxw(2).$implicit;m.xp6(5),m.Q6J("ngIf",1==e.inputExpanded)("ngIfElse",t)}}function D(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"div",15),m.TgZ(2,"div",16),m.TgZ(3,"div",17),m.TgZ(4,"span"),m._UZ(5,"i",18),m._uU(6),m.ALo(7,"date"),m.qZA(),m.TgZ(8,"span"),m._UZ(9,"i",19),m._uU(10),m.ALo(11,"date"),m.qZA(),m.qZA(),m.TgZ(12,"div",20),m.TgZ(13,"span"),m._UZ(14,"i",21),m._uU(15),m.ALo(16,"emptyGuard"),m.qZA(),m.TgZ(17,"span"),m._UZ(18,"i",22),m._uU(19),m.ALo(20,"emptyGuard"),m.qZA(),m.TgZ(21,"span"),m._UZ(22,"i",23),m._uU(23),m.ALo(24,"emptyGuard"),m.qZA(),m.qZA(),m.TgZ(25,"div",24),m.TgZ(26,"span"),m._UZ(27,"i",25),m._uU(28),m.ALo(29,"emptyGuard"),m.qZA(),m.TgZ(30,"span"),m._UZ(31,"i",26),m._uU(32),m.ALo(33,"emptyGuard"),m.qZA(),m.qZA(),m.TgZ(34,"div",20),m.TgZ(35,"span"),m._UZ(36,"i",27),m._uU(37),m.ALo(38,"emptyGuard"),m.qZA(),m.TgZ(39,"span"),m._UZ(40,"i",28),m._uU(41),m.ALo(42,"emptyGuard"),m.qZA(),m.qZA(),m.TgZ(43,"div",29),m.TgZ(44,"span",30),m._UZ(45,"i",31),m._uU(46),m.ALo(47,"formatHtml"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(48,Q,12,5,"div",32),m.YNc(49,N,8,2,"div",33),m.BQk()),2&t){const t=m.oxw().$implicit;m.xp6(6),m.Oqu(m.xi3(7,13,t.timestamp,"dd/MM/yyyy")),m.xp6(4),m.Oqu(m.xi3(11,16,t.timestamp,"HH:mm:ss")),m.xp6(5),m.Oqu(m.xi3(16,19,t.applicationVersion,"-")),m.xp6(4),m.Oqu(m.xi3(20,22,t.applicationLayer,"-")),m.xp6(4),m.Oqu(m.xi3(24,25,t.applicationArea,"-")),m.xp6(5),m.Oqu(m.xi3(29,28,t.machineName,"-")),m.xp6(4),m.AsE("",m.xi3(33,31,t.enviroment,"-")," - ",t.enviromentVersion,""),m.xp6(5),m.Oqu(m.xi3(38,34,t.username,"Anonymous")),m.xp6(4),m.Oqu(m.xi3(42,37,t.domain,"Without domain")),m.xp6(5),m.Oqu(m.xi3(47,40,t.source,175)),m.xp6(2),m.Q6J("ngIf",null!=t.message&&""!==t.message),m.xp6(1),m.Q6J("ngIf",null!=t.inputData&&""!==t.inputData)}}function C(t,e){1&t&&(m.ynx(0,13),m.YNc(1,D,50,43,"ng-container",14),m.BQk()),2&t&&(m.Q6J("ngSwitch",e.col.field),m.xp6(1),m.Q6J("ngSwitchCase","timestamp"))}function k(t,e){if(1&t&&(m.TgZ(0,"div",7),m.TgZ(1,"smz-ui-table",11),m.YNc(2,C,2,2,"ng-template",12),m.qZA(),m.qZA()),2&t){const t=m.oxw().ngIf,e=m.oxw();m.xp6(1),m.Q6J("items",t)("state",e.tableConfig)}}function J(t,e){if(1&t&&(m.ynx(0),m.YNc(1,E,5,4,"div",6),m.YNc(2,k,3,2,"div",6),m.BQk()),2&t){const t=e.ngIf;m.xp6(1),m.Q6J("ngIf",null!=t&&t.length>0),m.xp6(1),m.Q6J("ngIf",null!=t&&t.length>0)}}const M=w;let V=(()=>{let t=class{constructor(t){this.store=t,this.formConfig=null,this.tableConfig=null,this.emptyObject="{...}"}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new o.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).useStrippedStyle().columns().custom("timestamp","RESULTS","9em").disableFilter().disableSort().columns.table.build()}setupForm(){const t={propertyName:"dateFrom",type:o.rc7.CALENDAR,name:"From",defaultValue:M(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},e={propertyName:"dateTo",type:o.rc7.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"messages",type:o.rc7.MULTI_SELECT,name:"Messages",validatorsPreset:{isRequired:!1},defaultLabel:"All messages",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.messages),template:{extraLarge:{row:"col-6"}}},n={propertyName:"levels",type:o.rc7.MULTI_SELECT,name:"Levels",validatorsPreset:{isRequired:!1},defaultLabel:"All levels",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.levels),template:{extraLarge:{row:"col-6"}}},s={propertyName:"layers",type:o.rc7.MULTI_SELECT,name:"Layers",validatorsPreset:{isRequired:!1},defaultLabel:"All application layers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.layers),template:{extraLarge:{row:"col-2"}}},r={propertyName:"areas",type:o.rc7.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.areas),template:{extraLarge:{row:"col-2"}}},i={propertyName:"versions",type:o.rc7.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.versions),template:{extraLarge:{row:"col-2"}}},l={propertyName:"sources",type:o.rc7.MULTI_SELECT,name:"Sources",validatorsPreset:{isRequired:!1},defaultLabel:"All sources",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.sources),template:{extraLarge:{row:"col-3"}}},p={propertyName:"enviroments",type:o.rc7.MULTI_SELECT,name:"Enviroments",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.enviroments),template:{extraLarge:{row:"col-2"}}},c={propertyName:"enviromentsVersions",type:o.rc7.MULTI_SELECT,name:"Enviroments Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.enviromentsVersions),template:{extraLarge:{row:"col-2"}}},u={propertyName:"users",type:o.rc7.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.users),template:{extraLarge:{row:"col-2"}}},d={propertyName:"domains",type:o.rc7.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.domains),template:{extraLarge:{row:"col-2"}}},g={propertyName:"machines",type:o.rc7.MULTI_SELECT,name:"Machines",validatorsPreset:{isRequired:!1},defaultLabel:"All machines",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(Z.machines),template:{extraLarge:{row:"col-3"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[t,e,a,n,s,r,i,l,p,c,u,d,g],template:{extraLarge:{row:"col-12"}}}]}}search(t){const e=t.getData().data;for(const a in e)a.endsWith("Ids")&&(e[a.substring(0,a.length-3)]=e[a],delete e[a]);this.store.dispatch(new x.Search(e))}toggleExpansion(t,e){t[`${e}Expanded`]=null==t[`${e}Expanded`]||!t[`${e}Expanded`]}};return t.\u0275fac=function(e){return new(e||t)(m.Y36(c.yh))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-8"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"grid","grid-rows-1"],[1,"grid","grid-cols-12","gap-4"],[1,"grid","grid-rows-3","col-span-1","gap-2"],[1,"far","fa-calendar-alt","icon"],[1,"fas","fa-clock","icon"],[1,"grid","grid-rows-3","col-span-2","gap-2"],[1,"fas","fas","fa-code-branch","icon"],[1,"fas","fa-layer-group","icon"],[1,"fas","fa-sitemap","icon"],[1,"grid","grid-rows-3","col-span-3","gap-2"],[1,"fas","fa-tablet-alt","icon"],[1,"fab","fa-windows","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-users","icon"],[1,"grid","grid-rows-3","col-span-4","gap-2"],[1,"break-all"],[1,"fas","fa-project-diagram","icon"],["class","grid grid-rows-1 cursor-pointer mb-2.5",3,"click",4,"ngIf"],["class","grid grid-rows-1 cursor-pointer",3,"click",4,"ngIf"],[1,"grid","grid-rows-1","cursor-pointer","mb-2.5",3,"click"],[1,"grid","grid-cols-1"],[1,"fas","fa-message","icon"],[1,"fas","fa-exclamation","icon"],[4,"ngIf","ngIfElse"],["elseMessageTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","font-mono","text-sm"],[1,"grid","grid-rows-1","cursor-pointer",3,"click"],[1,"fas","fa-binary","icon"],["elseInputTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","text-sm","font-mono"]],template:function(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"p-panel",0),m._UZ(1,"smz-form-group",1,2),m.TgZ(3,"div",3),m.TgZ(4,"button",4),m.NdJ("click",function(){m.CHM(t);const a=m.MAs(2);return e.search(a)}),m.qZA(),m.qZA(),m.qZA(),m.YNc(5,J,3,2,"ng-container",5),m.ALo(6,"async")}2&t&&(m.xp6(1),m.Q6J("config",e.formConfig),m.xp6(4),m.Q6J("ngIf",m.lcZ(6,2,e.results$)))},directives:[L.s,o.HK$,i.Hq,r.O5,o.Tmf,o.aYM,U.jx,r.RF,r.n9],pipes:[r.Ov,r.uU,T,q,_],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,l.gn)([(0,c.Ph)(A.results)],t.prototype,"results$",void 0),(0,l.gn)([(0,c.Ph)(A.charts)],t.prototype,"charts$",void 0),t=(0,l.gn)([(0,p.c)()],t),t})();var R=a(8751),W=a(3464),P=a(9208);const $=[{path:"",children:[{path:W.f1+"/"+W.xJ,canActivate:[o.XFF],component:V,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[f]}}]}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[],imports:[[r.ez,s.Bz.forChild($),i.hJ,o.Z4r,L.Q,o.P$2,o.Yel,R.d,P.Ie]]}),t})()}}]);
(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[655],{5655:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SearchModule:()=>R});var n=a(2561),s=a(1116),r=a(1039),i=a(6726),o=a(4762),l=a(3623),p=a(2995),c=function(e){return e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e}({}),u=a(7676),d=a(5212);let m=(()=>{class e{static all(e){return(0,u.Z)(e.data)}static messages(e){return null==e.lastUpdated?this.noDataOptions:e.data.messages.map(e=>({id:e,name:""===e||null==e?"Without message":e}))}static levels(e){return null==e.lastUpdated?this.noDataOptions:e.data.levels.map(e=>e===c.Warning?{id:e,name:"Warning"}:e===c.Error?{id:e,name:"Error"}:e===c.Debug?{id:e,name:"Debug"}:{id:-1,name:"Without level"})}static layers(e){return null==e.lastUpdated?this.noDataOptions:e.data.layers.map(e=>({id:e,name:""===e||null==e?"Without application layer":e}))}static areas(e){return null==e.lastUpdated?this.noDataOptions:e.data.areas.map(e=>({id:e,name:""===e||null==e?"Without area":e}))}static versions(e){return null==e.lastUpdated?this.noDataOptions:e.data.versions.map(e=>({id:e,name:""===e||null==e?"Without version":e}))}static sources(e){return null==e.lastUpdated?this.noDataOptions:e.data.sources.map(e=>({id:e,name:""===e||null==e?"Without source":e}))}static enviroments(e){return null==e.lastUpdated?this.noDataOptions:e.data.enviroments.map(e=>({id:e,name:""===e||null==e?"Without enviroment":e}))}static enviromentsVersions(e){return null==e.lastUpdated?this.noDataOptions:e.data.enviromentsVersions.map(e=>({id:e,name:""===e||null==e?"Without enviroment version":e}))}static users(e){return null==e.lastUpdated?this.noDataOptions:e.data.users.map(e=>({id:e,name:""===e||null==e?"Without user":e}))}static domains(e){return null==e.lastUpdated?this.noDataOptions:e.data.domains.map(e=>({id:e,name:""===e||null==e?"Without domain":e}))}static machines(e){return null==e.lastUpdated?this.noDataOptions:e.data.machines.map(e=>({id:e,name:""===e||null==e?"Without machine name":e}))}}return e.noDataOptions=[{id:null,name:"No data available"}],(0,o.gn)([(0,p.Qf)([d.D])],e,"all",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"messages",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"levels",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"layers",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"areas",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"versions",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"sources",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"enviroments",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"enviromentsVersions",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"users",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"domains",null),(0,o.gn)([(0,p.Qf)([d.D])],e,"machines",null),e})();var g=a(1292),f=a(2901);let h=(()=>{class e{static results(e){return e.data.searchResults}static charts(e){return(0,u.Z)(e.data.charts)}}return(0,o.gn)([(0,p.Qf)([f.T])],e,"results",null),(0,o.gn)([(0,p.Qf)([f.T])],e,"charts",null),e})();var Z=a(9609),x=a(5366),y=a(8203),v=a(2290);let w=(()=>{class e{transform(e,...t){var a;return null!=e&&""!==e?e:null!==(a=t[0])&&void 0!==a?a:"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=x.Yjl({name:"emptyGuard",type:e,pure:!0}),e})(),A=(()=>{class e{transform(e,...t){if(null==e)return null;const a=null==e?void 0:e.split(/(?:\r\n|\r|\n)/g);let n=a[0];return n.length>t[0]&&(n=n.substring(0,t[0])+"..."),a.length>1&&(n+="[click to expand]"),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=x.Yjl({name:"formatHtml",type:e,pure:!0}),e})(),T=(()=>{class e{transform(e){return e===c.Warning?"Warning":e===c.Error?"Error":e===c.Debug?"Debug":"Without level"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=x.Yjl({name:"formatLevel",type:e,pure:!0}),e})();function L(e,t){if(1&e&&(x.ynx(0),x._UZ(1,"smz-ui-chart",10),x._UZ(2,"smz-ui-chart",10),x._UZ(3,"smz-ui-chart",10),x._UZ(4,"smz-ui-chart",10),x._UZ(5,"smz-ui-chart",10),x._UZ(6,"smz-ui-chart",10),x._UZ(7,"smz-ui-chart",10),x._UZ(8,"smz-ui-chart",10),x.BQk()),2&e){const e=t.ngIf;x.xp6(1),x.Q6J("type",e[0].chart.type)("options",e[0].chart.config)("data",e[0].chart.data),x.xp6(1),x.Q6J("type",e[1].chart.type)("options",e[1].chart.config)("data",e[1].chart.data),x.xp6(1),x.Q6J("type",e[2].chart.type)("options",e[2].chart.config)("data",e[2].chart.data),x.xp6(1),x.Q6J("type",e[3].chart.type)("options",e[3].chart.config)("data",e[3].chart.data),x.xp6(1),x.Q6J("type",e[4].chart.type)("options",e[4].chart.config)("data",e[4].chart.data),x.xp6(1),x.Q6J("type",e[5].chart.type)("options",e[5].chart.config)("data",e[5].chart.data),x.xp6(1),x.Q6J("type",e[6].chart.type)("options",e[6].chart.config)("data",e[6].chart.data),x.xp6(1),x.Q6J("type",e[7].chart.type)("options",e[7].chart.config)("data",e[7].chart.data)}}function U(e,t){if(1&e&&(x.TgZ(0,"div",7),x.TgZ(1,"p-panel",8),x.TgZ(2,"div",9),x.YNc(3,L,9,24,"ng-container",5),x.ALo(4,"async"),x.qZA(),x.qZA(),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.Q6J("toggleable",!0),x.xp6(2),x.Q6J("ngIf",x.lcZ(4,2,e.charts$))}}function q(e,t){1&e&&(x.ynx(0),x.TgZ(1,"span",40),x._uU(2,"{{item.message}"),x.qZA(),x.BQk())}function _(e,t){if(1&e&&(x.TgZ(0,"span",40),x._uU(1),x.ALo(2,"formatHtml"),x.qZA()),2&e){const e=x.oxw(3).$implicit;x.xp6(1),x.Oqu(x.xi3(2,1,e.message,175))}}function E(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",34),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).toggleExpansion(t,"message")}),x.TgZ(1,"div",35),x.TgZ(2,"span"),x._UZ(3,"i",36),x._uU(4,"Message"),x.qZA(),x.TgZ(5,"span"),x._UZ(6,"i",37),x._uU(7),x.ALo(8,"formatLevel"),x.qZA(),x.YNc(9,q,3,0,"ng-container",38),x.YNc(10,_,3,4,"ng-template",null,39,x.W1O),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(11),t=x.oxw(2).$implicit;x.xp6(7),x.Oqu(x.lcZ(8,3,t.level)),x.xp6(2),x.Q6J("ngIf",1==t.messageExpanded)("ngIfElse",e)}}function b(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"span",44),x._uU(2),x.qZA(),x.BQk()),2&e){const e=x.oxw(3).$implicit;x.xp6(2),x.Oqu(e.inputData)}}function I(e,t){if(1&e&&(x.TgZ(0,"span",44),x._uU(1),x.qZA()),2&e){const e=x.oxw(6);x.xp6(1),x.Oqu(e.emptyObject)}}function Q(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",41),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).toggleExpansion(t,"input")}),x.TgZ(1,"div",35),x.TgZ(2,"span"),x._UZ(3,"i",42),x._uU(4,"Input data"),x.qZA(),x.YNc(5,b,3,1,"ng-container",38),x.YNc(6,I,2,1,"ng-template",null,43,x.W1O),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(7),t=x.oxw(2).$implicit;x.xp6(5),x.Q6J("ngIf",1==t.inputExpanded)("ngIfElse",e)}}function D(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"div",15),x.TgZ(2,"div",16),x.TgZ(3,"div",17),x.TgZ(4,"span"),x._UZ(5,"i",18),x._uU(6),x.ALo(7,"date"),x.qZA(),x.TgZ(8,"span"),x._UZ(9,"i",19),x._uU(10),x.ALo(11,"date"),x.qZA(),x.qZA(),x.TgZ(12,"div",20),x.TgZ(13,"span"),x._UZ(14,"i",21),x._uU(15),x.ALo(16,"emptyGuard"),x.qZA(),x.TgZ(17,"span"),x._UZ(18,"i",22),x._uU(19),x.ALo(20,"emptyGuard"),x.qZA(),x.TgZ(21,"span"),x._UZ(22,"i",23),x._uU(23),x.ALo(24,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(25,"div",24),x.TgZ(26,"span"),x._UZ(27,"i",25),x._uU(28),x.ALo(29,"emptyGuard"),x.qZA(),x.TgZ(30,"span"),x._UZ(31,"i",26),x._uU(32),x.ALo(33,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(34,"div",20),x.TgZ(35,"span"),x._UZ(36,"i",27),x._uU(37),x.ALo(38,"emptyGuard"),x.qZA(),x.TgZ(39,"span"),x._UZ(40,"i",28),x._uU(41),x.ALo(42,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(43,"div",29),x.TgZ(44,"span",30),x._UZ(45,"i",31),x._uU(46),x.ALo(47,"formatHtml"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(48,E,12,5,"div",32),x.YNc(49,Q,8,2,"div",33),x.BQk()),2&e){const e=x.oxw().$implicit;x.xp6(6),x.Oqu(x.xi3(7,13,e.timestamp,"dd/MM/yyyy")),x.xp6(4),x.Oqu(x.xi3(11,16,e.timestamp,"HH:mm:ss")),x.xp6(5),x.Oqu(x.xi3(16,19,e.applicationVersion,"-")),x.xp6(4),x.Oqu(x.xi3(20,22,e.applicationLayer,"-")),x.xp6(4),x.Oqu(x.xi3(24,25,e.applicationArea,"-")),x.xp6(5),x.Oqu(x.xi3(29,28,e.machineName,"-")),x.xp6(4),x.AsE("",x.xi3(33,31,e.enviroment,"-")," - ",e.enviromentVersion,""),x.xp6(5),x.Oqu(x.xi3(38,34,e.username,"Anonymous")),x.xp6(4),x.Oqu(x.xi3(42,37,e.domain,"Without domain")),x.xp6(5),x.Oqu(x.xi3(47,40,e.source,175)),x.xp6(2),x.Q6J("ngIf",null!=e.message&&""!==e.message),x.xp6(1),x.Q6J("ngIf",null!=e.inputData&&""!==e.inputData)}}function S(e,t){1&e&&(x.ynx(0,13),x.YNc(1,D,50,43,"ng-container",14),x.BQk()),2&e&&(x.Q6J("ngSwitch",t.col.field),x.xp6(1),x.Q6J("ngSwitchCase","timestamp"))}function O(e,t){if(1&e&&(x.TgZ(0,"div",7),x.TgZ(1,"smz-ui-table",11),x.YNc(2,S,2,2,"ng-template",12),x.qZA(),x.qZA()),2&e){const e=x.oxw().ngIf,t=x.oxw();x.xp6(1),x.Q6J("items",e)("state",t.tableConfig)}}function N(e,t){if(1&e&&(x.ynx(0),x.YNc(1,U,5,4,"div",6),x.YNc(2,O,3,2,"div",6),x.BQk()),2&e){const e=t.ngIf;x.xp6(1),x.Q6J("ngIf",null!=e&&e.length>0),x.xp6(1),x.Q6J("ngIf",null!=e&&e.length>0)}}const C=Z;let F=(()=>{let e=class{constructor(e){this.store=e,this.formConfig=null,this.tableConfig=null,this.emptyObject="{...}"}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new r.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).useStrippedStyle().columns().custom("timestamp","RESULTS","9em").disableFilter().disableSort().columns.table.build()}setupForm(){const e={propertyName:"dateFrom",type:r.rc7.CALENDAR,name:"From",defaultValue:C(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},t={propertyName:"dateTo",type:r.rc7.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"messages",type:r.rc7.MULTI_SELECT,name:"Messages",validatorsPreset:{isRequired:!1},defaultLabel:"All messages",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.messages),template:{extraLarge:{row:"col-8"}}},n={propertyName:"levels",type:r.rc7.MULTI_SELECT,name:"Levels",validatorsPreset:{isRequired:!1},defaultLabel:"All levels",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.levels),template:{extraLarge:{row:"col-2"}}},s={propertyName:"layers",type:r.rc7.MULTI_SELECT,name:"Layers",validatorsPreset:{isRequired:!1},defaultLabel:"All application layers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.layers),template:{extraLarge:{row:"col-2"}}},i={propertyName:"areas",type:r.rc7.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.areas),template:{extraLarge:{row:"col-2"}}},o={propertyName:"versions",type:r.rc7.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.versions),template:{extraLarge:{row:"col-2"}}},l={propertyName:"sources",type:r.rc7.MULTI_SELECT,name:"Sources",validatorsPreset:{isRequired:!1},defaultLabel:"All sources",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.sources),template:{extraLarge:{row:"col-2"}}},p={propertyName:"enviroments",type:r.rc7.MULTI_SELECT,name:"Enviroments",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.enviroments),template:{extraLarge:{row:"col-2"}}},c={propertyName:"enviromentsVersions",type:r.rc7.MULTI_SELECT,name:"Enviroments Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.enviromentsVersions),template:{extraLarge:{row:"col-2"}}},u={propertyName:"users",type:r.rc7.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.users),template:{extraLarge:{row:"col-2"}}},d={propertyName:"domains",type:r.rc7.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.domains),template:{extraLarge:{row:"col-2"}}},g={propertyName:"machines",type:r.rc7.MULTI_SELECT,name:"Machines",validatorsPreset:{isRequired:!1},defaultLabel:"All machines",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(m.machines),template:{extraLarge:{row:"col-2"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[e,t,a,n,s,i,o,l,p,c,u,d,g],template:{extraLarge:{row:"col-12"}}}]}}search(e){const t=e.getData().data;for(const a in t)a.endsWith("Ids")&&(t[a.substring(0,a.length-3)]=t[a],delete t[a]);this.store.dispatch(new g.Z.Search(t))}toggleExpansion(e,t){e[`${t}Expanded`]=null==e[`${t}Expanded`]||!e[`${t}Expanded`]}};return e.\u0275fac=function(t){return new(t||e)(x.Y36(p.yh))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-8"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"grid","grid-rows-1"],[1,"grid","grid-cols-12","gap-4"],[1,"grid","grid-rows-3","col-span-1","gap-2"],[1,"far","fa-calendar-alt","icon"],[1,"fas","fa-clock","icon"],[1,"grid","grid-rows-3","col-span-2","gap-2"],[1,"fas","fas","fa-code-branch","icon"],[1,"fas","fa-layer-group","icon"],[1,"fas","fa-sitemap","icon"],[1,"grid","grid-rows-3","col-span-3","gap-2"],[1,"fas","fa-tablet-alt","icon"],[1,"fab","fa-windows","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-users","icon"],[1,"grid","grid-rows-3","col-span-4","gap-2"],[1,"break-all"],[1,"fas","fa-project-diagram","icon"],["class","grid grid-rows-1 cursor-pointer mb-2.5",3,"click",4,"ngIf"],["class","grid grid-rows-1 cursor-pointer",3,"click",4,"ngIf"],[1,"grid","grid-rows-1","cursor-pointer","mb-2.5",3,"click"],[1,"grid","grid-cols-1"],[1,"fas","fa-message","icon"],[1,"fas","fa-exclamation","icon"],[4,"ngIf","ngIfElse"],["elseMessageTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","font-mono","text-sm"],[1,"grid","grid-rows-1","cursor-pointer",3,"click"],[1,"fas","fa-binary","icon"],["elseInputTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","text-sm","font-mono"]],template:function(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"p-panel",0),x._UZ(1,"smz-form-group",1,2),x.TgZ(3,"div",3),x.TgZ(4,"button",4),x.NdJ("click",function(){x.CHM(e);const a=x.MAs(2);return t.search(a)}),x.qZA(),x.qZA(),x.qZA(),x.YNc(5,N,3,2,"ng-container",5),x.ALo(6,"async")}2&e&&(x.xp6(1),x.Q6J("config",t.formConfig),x.xp6(4),x.Q6J("ngIf",x.lcZ(6,2,t.results$)))},directives:[y.s,r.HK$,i.Hq,s.O5,r.Tmf,r.aYM,v.jx,s.RF,s.n9],pipes:[s.Ov,s.uU,w,A,T],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,o.gn)([(0,p.Ph)(h.results)],e.prototype,"results$",void 0),(0,o.gn)([(0,p.Ph)(h.charts)],e.prototype,"charts$",void 0),e=(0,o.gn)([(0,l.c)()],e),e})();var J=a(8751),k=a(3464),M=a(9208);const V=[{path:"",children:[{path:k.f1+"/"+k.xJ,canActivate:[r.XFF],component:F,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[d._]}}]}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[],imports:[[s.ez,n.Bz.forChild(V),i.hJ,r.Z4r,y.Q,r.P$2,r.Yel,J.d,M.Ie]]}),e})()}}]);
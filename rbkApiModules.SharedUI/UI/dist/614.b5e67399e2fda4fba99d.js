(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[614],{1614:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SearchModule:()=>X});var n=a(2561),s=a(1116),i=a(4605),o=a(1309),r=a(3027),l=a(6726),c=a(4762),p=a(3623),u=a(2995),d=a(3063),f=a(5526);let g=(()=>{class e{static all(e){return(0,d.Z)(e.data)}static versions(e){return null==e.lastUpdated?this.noDataOptions:e.data.versions.map(e=>({id:e,name:""===e||null==e?"Without version":e}))}static areas(e){return null==e.lastUpdated?this.noDataOptions:e.data.areas.map(e=>({id:e,name:""===e||null==e?"Without area":e}))}static domains(e){return null==e.lastUpdated?this.noDataOptions:e.data.domains.map(e=>({id:e,name:""===e||null==e?"Without domain":e}))}static endpoints(e){return null==e.lastUpdated?this.noDataOptions:e.data.actions.map(e=>({id:e,name:""===e||null==e?"Without domain":e}))}static responses(e){return null==e.lastUpdated?this.noDataOptions:e.data.responses.map(e=>({id:e,name:""===e||null==e?"Without response":e}))}static users(e){return null==e.lastUpdated?this.noDataOptions:e.data.users.map(e=>({id:e,name:""===e||null==e?"Without user":e}))}static userAgents(e){return null==e.lastUpdated?this.noDataOptions:e.data.agents.map(e=>({id:e,name:""===e||null==e?"Without user agent":e}))}}return e.noDataOptions=[{id:null,name:"No data available"}],(0,c.gn)([(0,u.Qf)([f.D])],e,"all",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"versions",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"areas",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"domains",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"endpoints",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"responses",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"users",null),(0,c.gn)([(0,u.Qf)([f.D])],e,"userAgents",null),e})();var m=a(8963),h=a(2628);let Z=(()=>{class e{static results(e){return e.data.searchResults.map(e=>Object.assign(Object.assign({},e),{responseSize:Math.round(e.responseSize/1024*10)/10,requestSize:Math.round(e.requestSize/1024*10)/10}))}static charts(e){return(0,d.Z)(e.data.charts)}}return(0,c.gn)([(0,u.Qf)([h.T])],e,"results",null),(0,c.gn)([(0,u.Qf)([h.T])],e,"charts",null),e})();var x=a(9609),A=a(5366),T=a(8203),w=a(2290);function q(e,t){if(1&e&&(A.ynx(0),A._UZ(1,"smz-ui-chart",10),A._UZ(2,"smz-ui-chart",10),A._UZ(3,"smz-ui-chart",10),A._UZ(4,"smz-ui-chart",10),A.BQk()),2&e){const e=t.ngIf;A.xp6(1),A.Q6J("type",e[0].chart.type)("options",e[0].chart.config)("data",e[0].chart.data),A.xp6(1),A.Q6J("type",e[1].chart.type)("options",e[1].chart.config)("data",e[1].chart.data),A.xp6(1),A.Q6J("type",e[2].chart.type)("options",e[2].chart.config)("data",e[2].chart.data),A.xp6(1),A.Q6J("type",e[3].chart.type)("options",e[3].chart.config)("data",e[3].chart.data)}}function U(e,t){if(1&e&&(A.TgZ(0,"div",7),A.TgZ(1,"p-panel",8),A.TgZ(2,"div",9),A.YNc(3,q,5,12,"ng-container",5),A.ALo(4,"async"),A.qZA(),A.qZA(),A.qZA()),2&e){const e=A.oxw(2);A.xp6(1),A.Q6J("toggleable",!0),A.xp6(2),A.Q6J("ngIf",A.lcZ(4,2,e.charts$))}}function y(e,t){1&e&&A._UZ(0,"i",22)}function v(e,t){1&e&&A._UZ(0,"i",23)}function Q(e,t){1&e&&A._UZ(0,"i",24)}function I(e,t){1&e&&A._UZ(0,"i",25)}function S(e,t){1&e&&A._UZ(0,"i",26)}function _(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",15),A.TgZ(2,"div",16),A.TgZ(3,"div"),A.YNc(4,y,1,0,"i",17),A.qZA(),A.YNc(5,v,1,0,"i",18),A.YNc(6,Q,1,0,"i",19),A.YNc(7,I,1,0,"i",20),A.YNc(8,S,1,0,"i",21),A.qZA(),A.TgZ(9,"div",16),A._uU(10),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(4),A.Q6J("ngIf",200===e.response||204===e.response),A.xp6(1),A.Q6J("ngIf",400===e.response),A.xp6(1),A.Q6J("ngIf",e.response>=300&&e.response<500&&400!==e.response&&401!==e.response),A.xp6(1),A.Q6J("ngIf",500===e.response),A.xp6(1),A.Q6J("ngIf",401===e.response||403===e.response),A.xp6(2),A.Oqu(e.response)}}function b(e,t){if(1&e&&(A.TgZ(0,"div"),A._uU(1),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(1),A.Oqu(e.path.toLowerCase())}}function L(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",15),A.TgZ(2,"div"),A._uU(3),A.qZA(),A.YNc(4,b,2,1,"div",5),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(3),A.Oqu(e.action),A.xp6(1),A.Q6J("ngIf",e.action.toLowerCase()!==e.path.toLowerCase())}}function N(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",15),A.TgZ(2,"span"),A._UZ(3,"i",27),A._uU(4),A.ALo(5,"date"),A.qZA(),A.TgZ(6,"span"),A._UZ(7,"i",28),A._uU(8),A.ALo(9,"date"),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(4),A.Oqu(A.xi3(5,2,e.timestamp,"dd/MM/yyyy")),A.xp6(4),A.Oqu(A.xi3(9,5,e.timestamp,"HH:mm:ss"))}}function C(e,t){if(1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",30),A._uU(2),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(2),A.Oqu(e.area)}}function J(e,t){if(1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",30),A._uU(2),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(2),A.AsE("",e.area," (",e.domain,")")}}function E(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",15),A.YNc(2,C,3,1,"span",5),A.YNc(3,J,3,2,"span",5),A.TgZ(4,"span"),A._UZ(5,"i",29),A._uU(6),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(2),A.Q6J("ngIf",null==e.domain||""==e.domain),A.xp6(1),A.Q6J("ngIf",null!=e.domain&&""!=e.domain),A.xp6(3),A.Oqu(e.version)}}function O(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",15),A.TgZ(2,"span"),A._UZ(3,"i",31),A._uU(4),A.qZA(),A.TgZ(5,"span"),A._UZ(6,"i",32),A._uU(7),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(4),A.Oqu(null!=e.username&&""!==e.username?e.username:"Anonymous"),A.xp6(3),A.Oqu(e.ipAddress)}}function Y(e,t){1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",36),A._uU(2,"-"),A.qZA())}function F(e,t){if(1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",36),A._uU(2),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(2),A.AsE(" ",e.totalTransactionTime,"ms (",e.transactionCount,"x)")}}function k(e,t){1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",37),A._uU(2,"-"),A.qZA())}function D(e,t){if(1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",37),A._uU(2),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(2),A.hij("",e.requestSize," kb")}}function R(e,t){1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",38),A._uU(2,"-"),A.qZA())}function z(e,t){if(1&e&&(A.TgZ(0,"span"),A._UZ(1,"i",38),A._uU(2),A.qZA()),2&e){const e=A.oxw(2).$implicit;A.xp6(2),A.hij("",e.responseSize," kb")}}function P(e,t){if(1&e&&(A.ynx(0),A.TgZ(1,"div",33),A.TgZ(2,"div",34),A.TgZ(3,"span"),A._UZ(4,"i",35),A._uU(5),A.qZA(),A.YNc(6,Y,3,0,"span",5),A.YNc(7,F,3,2,"span",5),A.qZA(),A.TgZ(8,"div",15),A.YNc(9,k,3,0,"span",5),A.YNc(10,D,3,1,"span",5),A.YNc(11,R,3,0,"span",5),A.YNc(12,z,3,1,"span",5),A.qZA(),A.qZA(),A.BQk()),2&e){const e=A.oxw().$implicit;A.xp6(5),A.hij(" ",e.duration,"ms"),A.xp6(1),A.Q6J("ngIf",null==e.transactionCount||0==e.transactionCount),A.xp6(1),A.Q6J("ngIf",null!=e.transactionCount&&e.transactionCount>0),A.xp6(2),A.Q6J("ngIf",null==e.requestSize||0==e.requestSize),A.xp6(1),A.Q6J("ngIf",null!=e.requestSize&&e.requestSize>0),A.xp6(1),A.Q6J("ngIf",null==e.responseSize||0==e.responseSize),A.xp6(1),A.Q6J("ngIf",null!=e.responseSize&&e.responseSize>0)}}function M(e,t){1&e&&(A.ynx(0,13),A.YNc(1,_,11,6,"ng-container",14),A.YNc(2,L,5,2,"ng-container",14),A.YNc(3,N,10,8,"ng-container",14),A.YNc(4,E,7,3,"ng-container",14),A.YNc(5,O,8,2,"ng-container",14),A.YNc(6,P,13,7,"ng-container",14),A.BQk()),2&e&&(A.Q6J("ngSwitch",t.col.field),A.xp6(1),A.Q6J("ngSwitchCase","response"),A.xp6(1),A.Q6J("ngSwitchCase","action"),A.xp6(1),A.Q6J("ngSwitchCase","timestamp"),A.xp6(1),A.Q6J("ngSwitchCase","application"),A.xp6(1),A.Q6J("ngSwitchCase","user"),A.xp6(1),A.Q6J("ngSwitchCase","performance"))}function $(e,t){if(1&e&&(A.TgZ(0,"div",7),A.TgZ(1,"smz-ui-table",11),A.YNc(2,M,7,7,"ng-template",12),A.qZA(),A.qZA()),2&e){const e=A.oxw().ngIf,t=A.oxw();A.xp6(1),A.Q6J("items",e)("state",t.tableConfig)}}function B(e,t){if(1&e&&(A.ynx(0),A.YNc(1,U,5,4,"div",6),A.YNc(2,$,3,2,"div",6),A.BQk()),2&e){const e=t.ngIf;A.xp6(1),A.Q6J("ngIf",null!=e&&e.length>0),A.xp6(1),A.Q6J("ngIf",null!=e&&e.length>0)}}const V=x;let W=(()=>{let e=class{constructor(e){this.store=e,this.formConfig=null,this.tableConfig=null}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new i.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).columns().custom("response","","4em").ignoreOnGlobalFilter().disableFilter().disableSort().columns.custom("timestamp","TIMESTAMP","9em").disableFilter().disableSort().columns.custom("action","ENDPOINT").disableFilter().disableSort().columns.custom("application","APPLICATION").disableFilter().disableSort().columns.custom("user","USER").disableFilter().disableSort().columns.custom("performance","PERFORMANCE","20em").disableFilter().disableSort().columns.table.build()}setupForm(){const e={propertyName:"dateFrom",type:r.rc.CALENDAR,name:"From",defaultValue:V(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},t={propertyName:"dateTo",type:r.rc.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"versions",type:r.rc.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.versions),template:{extraLarge:{row:"col-2"}}},n={propertyName:"areas",type:r.rc.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.areas),template:{extraLarge:{row:"col-2"}}},s={propertyName:"domains",type:r.rc.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.domains),template:{extraLarge:{row:"col-2"}}},i={propertyName:"endpoints",type:r.rc.MULTI_SELECT,name:"Endpoints",validatorsPreset:{isRequired:!1},defaultLabel:"All endpoints",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.endpoints),template:{extraLarge:{row:"col-3"}}},o={propertyName:"responses",type:r.rc.MULTI_SELECT,name:"Responses",validatorsPreset:{isRequired:!1},defaultLabel:"All responses",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.responses),template:{extraLarge:{row:"col-2"}}},l={propertyName:"users",type:r.rc.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.users),template:{extraLarge:{row:"col-2"}}},c={propertyName:"agents",type:r.rc.MULTI_SELECT,name:"User Agents",validatorsPreset:{isRequired:!1},defaultLabel:"All user agents",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(g.userAgents),template:{extraLarge:{row:"col-4"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[e,t,a,n,s,l,i,o,c,{propertyName:"entityId",type:r.rc.TEXT,name:"Entity Id",validatorsPreset:{isRequired:!1},defaultValue:null,template:{extraLarge:{row:"col-3"}}}],template:{extraLarge:{row:"col-12"}}}]}}search(e){const t=e.getData().data;for(const a in t)a.endsWith("Ids")&&(t[a.substring(0,a.length-3)]=t[a],delete t[a]);this.store.dispatch(new m.Z.Search(t))}};return e.\u0275fac=function(t){return new(t||e)(A.Y36(u.yh))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-4"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"p-d-flex","p-flex-column"],[1,"p-d-flex","p-jc-center"],["class","fas fa-check-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-question-circle",4,"ngIf"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-shield-alt",4,"ngIf"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-question-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-shield-alt"],[1,"far","fa-calendar-alt","icon"],[1,"far","fa-clock","icon"],[1,"fas","fa-code-branch","icon"],[1,"fas","fa-laptop-code","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-network-wired","icon"],[1,"grid","grid-cols-2"],[1,"p-d-flex","p-flex-column","p-mr-6"],[1,"fas","fa-microchip","icon"],[1,"fas","fa-database","icon"],[1,"fas","fa-upload","icon"],[1,"fas","fa-download","icon"]],template:function(e,t){if(1&e){const e=A.EpF();A.TgZ(0,"p-panel",0),A._UZ(1,"smz-form-group",1,2),A.TgZ(3,"div",3),A.TgZ(4,"button",4),A.NdJ("click",function(){A.CHM(e);const a=A.MAs(2);return t.search(a)}),A.qZA(),A.qZA(),A.qZA(),A.YNc(5,B,3,2,"ng-container",5),A.ALo(6,"async")}2&e&&(A.xp6(1),A.Q6J("config",t.formConfig),A.xp6(4),A.Q6J("ngIf",A.lcZ(6,2,t.results$)))},directives:[T.s,r.HK,l.Hq,s.O5,i.ibd,i.aYM,w.jx,s.RF,s.n9],pipes:[s.Ov,s.uU],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,c.gn)([(0,u.Ph)(Z.results)],e.prototype,"results$",void 0),(0,c.gn)([(0,u.Ph)(Z.charts)],e.prototype,"charts$",void 0),e=(0,c.gn)([(0,p.c)()],e),e})();var j=a(8751);const H=[{path:"",children:[{path:"",canActivate:[o.XF],component:W,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[f.o,o.gM]}}]}];let X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({providers:[],imports:[[s.ez,n.Bz.forChild(H),l.hJ,r.Z4,T.Q,i.P$2,i.Yel,j.d]]}),e})()}}]);
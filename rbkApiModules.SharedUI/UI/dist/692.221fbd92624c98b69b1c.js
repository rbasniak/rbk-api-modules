(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[692],{7692:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SearchModule:()=>H});var n=a(2561),s=a(1116),i=a(8091),o=a(6726),r=a(4762),l=a(3623),c=a(2995),p=a(7676),u=a(8559);let d=(()=>{class e{static all(e){return(0,p.Z)(e.data)}static versions(e){return null==e.lastUpdated?this.noDataOptions:e.data.versions.map(e=>({id:e,name:""===e||null==e?"Without version":e}))}static areas(e){return null==e.lastUpdated?this.noDataOptions:e.data.areas.map(e=>({id:e,name:""===e||null==e?"Without area":e}))}static domains(e){return null==e.lastUpdated?this.noDataOptions:e.data.domains.map(e=>({id:e,name:""===e||null==e?"Without domain":e}))}static endpoints(e){return null==e.lastUpdated?this.noDataOptions:e.data.actions.map(e=>({id:e,name:""===e||null==e?"Without endpoint":e}))}static responses(e){return null==e.lastUpdated?this.noDataOptions:e.data.responses.map(e=>({id:e,name:""===e||null==e?"Without response":e}))}static users(e){return null==e.lastUpdated?this.noDataOptions:e.data.users.map(e=>({id:e,name:""===e||null==e?"Without user":e}))}static userAgents(e){return null==e.lastUpdated?this.noDataOptions:e.data.agents.map(e=>({id:e,name:""===e||null==e?"Without user agent":e}))}}return e.noDataOptions=[{id:null,name:"No data available"}],(0,r.gn)([(0,c.Qf)([u.D])],e,"all",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"versions",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"areas",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"domains",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"endpoints",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"responses",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"users",null),(0,r.gn)([(0,c.Qf)([u.D])],e,"userAgents",null),e})();var f=a(9376),g=a(1817);let m=(()=>{class e{static results(e){return e.data.searchResults.map(e=>Object.assign(Object.assign({},e),{responseSize:Math.round(e.responseSize/1024*10)/10,requestSize:Math.round(e.requestSize/1024*10)/10}))}static charts(e){return(0,p.Z)(e.data.charts)}}return(0,r.gn)([(0,c.Qf)([g.T])],e,"results",null),(0,r.gn)([(0,c.Qf)([g.T])],e,"charts",null),e})();var h=a(9609),Z=a(5366),x=a(8203),A=a(2290);function T(e,t){if(1&e&&(Z.ynx(0),Z._UZ(1,"smz-ui-chart",10),Z._UZ(2,"smz-ui-chart",10),Z._UZ(3,"smz-ui-chart",10),Z._UZ(4,"smz-ui-chart",10),Z.BQk()),2&e){const e=t.ngIf;Z.xp6(1),Z.Q6J("type",e[0].chart.type)("options",e[0].chart.config)("data",e[0].chart.data),Z.xp6(1),Z.Q6J("type",e[1].chart.type)("options",e[1].chart.config)("data",e[1].chart.data),Z.xp6(1),Z.Q6J("type",e[2].chart.type)("options",e[2].chart.config)("data",e[2].chart.data),Z.xp6(1),Z.Q6J("type",e[3].chart.type)("options",e[3].chart.config)("data",e[3].chart.data)}}function w(e,t){if(1&e&&(Z.TgZ(0,"div",7),Z.TgZ(1,"p-panel",8),Z.TgZ(2,"div",9),Z.YNc(3,T,5,12,"ng-container",5),Z.ALo(4,"async"),Z.qZA(),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(2);Z.xp6(1),Z.Q6J("toggleable",!0),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(4,2,e.charts$))}}function q(e,t){1&e&&Z._UZ(0,"i",22)}function U(e,t){1&e&&Z._UZ(0,"i",23)}function y(e,t){1&e&&Z._UZ(0,"i",24)}function v(e,t){1&e&&Z._UZ(0,"i",25)}function Q(e,t){1&e&&Z._UZ(0,"i",26)}function S(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",15),Z.TgZ(2,"div",16),Z.TgZ(3,"div"),Z.YNc(4,q,1,0,"i",17),Z.qZA(),Z.YNc(5,U,1,0,"i",18),Z.YNc(6,y,1,0,"i",19),Z.YNc(7,v,1,0,"i",20),Z.YNc(8,Q,1,0,"i",21),Z.qZA(),Z.TgZ(9,"div",16),Z._uU(10),Z.qZA(),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(4),Z.Q6J("ngIf",200===e.response||204===e.response),Z.xp6(1),Z.Q6J("ngIf",400===e.response),Z.xp6(1),Z.Q6J("ngIf",e.response>=300&&e.response<500&&400!==e.response&&401!==e.response),Z.xp6(1),Z.Q6J("ngIf",500===e.response),Z.xp6(1),Z.Q6J("ngIf",401===e.response||403===e.response),Z.xp6(2),Z.Oqu(e.response)}}function I(e,t){if(1&e&&(Z.TgZ(0,"div"),Z._uU(1),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(1),Z.Oqu(e.path)}}function _(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",15),Z.TgZ(2,"div"),Z._uU(3),Z.qZA(),Z.YNc(4,I,2,1,"div",5),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(3),Z.Oqu(e.action),Z.xp6(1),Z.Q6J("ngIf",(null==e.action?null:e.action.toLowerCase())!==(null==e.path?null:e.path.toLowerCase()))}}function b(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",15),Z.TgZ(2,"span"),Z._UZ(3,"i",27),Z._uU(4),Z.ALo(5,"date"),Z.qZA(),Z.TgZ(6,"span"),Z._UZ(7,"i",28),Z._uU(8),Z.ALo(9,"date"),Z.qZA(),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(4),Z.Oqu(Z.xi3(5,2,e.timestamp,"dd/MM/yyyy")),Z.xp6(4),Z.Oqu(Z.xi3(9,5,e.timestamp,"HH:mm:ss"))}}function N(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",30),Z._uU(2),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.Oqu(e.area)}}function L(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",30),Z._uU(2),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.AsE("",e.area," (",e.domain,")")}}function C(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",15),Z.YNc(2,N,3,1,"span",5),Z.YNc(3,L,3,2,"span",5),Z.TgZ(4,"span"),Z._UZ(5,"i",29),Z._uU(6),Z.qZA(),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(2),Z.Q6J("ngIf",null==e.domain||""==e.domain),Z.xp6(1),Z.Q6J("ngIf",null!=e.domain&&""!=e.domain),Z.xp6(3),Z.Oqu(e.version)}}function J(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",15),Z.TgZ(2,"span"),Z._UZ(3,"i",31),Z._uU(4),Z.qZA(),Z.TgZ(5,"span"),Z._UZ(6,"i",32),Z._uU(7),Z.qZA(),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(4),Z.Oqu(null!=e.username&&""!==e.username?e.username:"Anonymous"),Z.xp6(3),Z.Oqu(e.ipAddress)}}function E(e,t){1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",36),Z._uU(2,"-"),Z.qZA())}function O(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",36),Z._uU(2),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.AsE(" ",e.totalTransactionTime,"ms (",e.transactionCount,"x)")}}function F(e,t){1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",37),Z._uU(2,"-"),Z.qZA())}function Y(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",37),Z._uU(2),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.hij("",e.requestSize," kb")}}function k(e,t){1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",38),Z._uU(2,"-"),Z.qZA())}function D(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._UZ(1,"i",38),Z._uU(2),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.hij("",e.responseSize," kb")}}function R(e,t){if(1&e&&(Z.ynx(0),Z.TgZ(1,"div",33),Z.TgZ(2,"div",34),Z.TgZ(3,"span"),Z._UZ(4,"i",35),Z._uU(5),Z.qZA(),Z.YNc(6,E,3,0,"span",5),Z.YNc(7,O,3,2,"span",5),Z.qZA(),Z.TgZ(8,"div",15),Z.YNc(9,F,3,0,"span",5),Z.YNc(10,Y,3,1,"span",5),Z.YNc(11,k,3,0,"span",5),Z.YNc(12,D,3,1,"span",5),Z.qZA(),Z.qZA(),Z.BQk()),2&e){const e=Z.oxw().$implicit;Z.xp6(5),Z.hij(" ",e.duration,"ms"),Z.xp6(1),Z.Q6J("ngIf",null==e.transactionCount||0==e.transactionCount),Z.xp6(1),Z.Q6J("ngIf",null!=e.transactionCount&&e.transactionCount>0),Z.xp6(2),Z.Q6J("ngIf",null==e.requestSize||0==e.requestSize),Z.xp6(1),Z.Q6J("ngIf",null!=e.requestSize&&e.requestSize>0),Z.xp6(1),Z.Q6J("ngIf",null==e.responseSize||0==e.responseSize),Z.xp6(1),Z.Q6J("ngIf",null!=e.responseSize&&e.responseSize>0)}}function z(e,t){1&e&&(Z.ynx(0,13),Z.YNc(1,S,11,6,"ng-container",14),Z.YNc(2,_,5,2,"ng-container",14),Z.YNc(3,b,10,8,"ng-container",14),Z.YNc(4,C,7,3,"ng-container",14),Z.YNc(5,J,8,2,"ng-container",14),Z.YNc(6,R,13,7,"ng-container",14),Z.BQk()),2&e&&(Z.Q6J("ngSwitch",t.col.field),Z.xp6(1),Z.Q6J("ngSwitchCase","response"),Z.xp6(1),Z.Q6J("ngSwitchCase","action"),Z.xp6(1),Z.Q6J("ngSwitchCase","timestamp"),Z.xp6(1),Z.Q6J("ngSwitchCase","application"),Z.xp6(1),Z.Q6J("ngSwitchCase","user"),Z.xp6(1),Z.Q6J("ngSwitchCase","performance"))}function P(e,t){if(1&e&&(Z.TgZ(0,"div",7),Z.TgZ(1,"smz-ui-table",11),Z.YNc(2,z,7,7,"ng-template",12),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw().ngIf,t=Z.oxw();Z.xp6(1),Z.Q6J("items",e)("state",t.tableConfig)}}function $(e,t){if(1&e&&(Z.ynx(0),Z.YNc(1,w,5,4,"div",6),Z.YNc(2,P,3,2,"div",6),Z.BQk()),2&e){const e=t.ngIf;Z.xp6(1),Z.Q6J("ngIf",null!=e&&e.length>0),Z.xp6(1),Z.Q6J("ngIf",null!=e&&e.length>0)}}const M=h;let B=(()=>{let e=class{constructor(e){this.store=e,this.formConfig=null,this.tableConfig=null}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new i.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).columns().custom("response","","4em").ignoreOnGlobalFilter().disableFilter().disableSort().columns.custom("timestamp","TIMESTAMP","9em").disableFilter().disableSort().columns.custom("action","ENDPOINT").disableFilter().disableSort().columns.custom("application","APPLICATION").disableFilter().disableSort().columns.custom("user","USER").disableFilter().disableSort().columns.custom("performance","PERFORMANCE","20em").disableFilter().disableSort().columns.table.build()}setupForm(){const e={propertyName:"dateFrom",type:i.rc7.CALENDAR,name:"From",defaultValue:M(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},t={propertyName:"dateTo",type:i.rc7.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"versions",type:i.rc7.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.versions),template:{extraLarge:{row:"col-2"}}},n={propertyName:"areas",type:i.rc7.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.areas),template:{extraLarge:{row:"col-2"}}},s={propertyName:"domains",type:i.rc7.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.domains),template:{extraLarge:{row:"col-2"}}},o={propertyName:"actions",type:i.rc7.MULTI_SELECT,name:"Endpoints",validatorsPreset:{isRequired:!1},defaultLabel:"All endpoints",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.endpoints),template:{extraLarge:{row:"col-3"}}},r={propertyName:"responses",type:i.rc7.MULTI_SELECT,name:"Responses",validatorsPreset:{isRequired:!1},defaultLabel:"All responses",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.responses),template:{extraLarge:{row:"col-2"}}},l={propertyName:"users",type:i.rc7.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.users),template:{extraLarge:{row:"col-2"}}},c={propertyName:"agents",type:i.rc7.MULTI_SELECT,name:"User Agents",validatorsPreset:{isRequired:!1},defaultLabel:"All user agents",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.userAgents),template:{extraLarge:{row:"col-4"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[e,t,a,n,s,l,o,r,c,{propertyName:"entityId",type:i.rc7.TEXT,name:"Entity Id",validatorsPreset:{isRequired:!1},defaultValue:null,template:{extraLarge:{row:"col-3"}}}],template:{extraLarge:{row:"col-12"}}}]}}search(e){const t=e.getData().data;for(const a in t)a.endsWith("Ids")&&(t[a.substring(0,a.length-3)]=t[a],delete t[a]);this.store.dispatch(new f.Z.Search(t))}};return e.\u0275fac=function(t){return new(t||e)(Z.Y36(c.yh))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-4"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"p-d-flex","p-flex-column"],[1,"p-d-flex","p-jc-center"],["class","fas fa-check-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-question-circle",4,"ngIf"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-shield-alt",4,"ngIf"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-question-circle"],[1,"fas","fa-times-circle"],[1,"fas","fa-shield-alt"],[1,"far","fa-calendar-alt","icon"],[1,"far","fa-clock","icon"],[1,"fas","fa-code-branch","icon"],[1,"fas","fa-laptop-code","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-network-wired","icon"],[1,"grid","grid-cols-2"],[1,"p-d-flex","p-flex-column","p-mr-6"],[1,"fas","fa-microchip","icon"],[1,"fas","fa-database","icon"],[1,"fas","fa-upload","icon"],[1,"fas","fa-download","icon"]],template:function(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"p-panel",0),Z._UZ(1,"smz-form-group",1,2),Z.TgZ(3,"div",3),Z.TgZ(4,"button",4),Z.NdJ("click",function(){Z.CHM(e);const a=Z.MAs(2);return t.search(a)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(5,$,3,2,"ng-container",5),Z.ALo(6,"async")}2&e&&(Z.xp6(1),Z.Q6J("config",t.formConfig),Z.xp6(4),Z.Q6J("ngIf",Z.lcZ(6,2,t.results$)))},directives:[x.s,i.HK$,o.Hq,s.O5,i.Tmf,i.aYM,A.jx,s.RF,s.n9],pipes:[s.Ov,s.uU],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,r.gn)([(0,c.Ph)(m.results)],e.prototype,"results$",void 0),(0,r.gn)([(0,c.Ph)(m.charts)],e.prototype,"charts$",void 0),e=(0,r.gn)([(0,l.c)()],e),e})();var V=a(8751),W=a(3464);const j=[{path:"",children:[{path:W.R3+"/"+W.xJ,canActivate:[i.XFF],component:B,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[u.S]}}]}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({providers:[],imports:[[s.ez,n.Bz.forChild(j),o.hJ,i.Z4r,x.Q,i.P$2,i.Yel,V.d]]}),e})()}}]);
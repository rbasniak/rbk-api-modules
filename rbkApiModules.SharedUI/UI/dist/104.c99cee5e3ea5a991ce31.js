(self.webpackChunkrbk_shared_ui=self.webpackChunkrbk_shared_ui||[]).push([[104],{104:(t,e,a)=>{"use strict";a.r(e),a.d(e,{SearchModule:()=>P});var s=a(2561),n=a(1116),i=a(2360),r=a(6726),o=a(4762),l=a(3623),p=a(2995),c=a(7676),u=a(888);let d=(()=>{class t{static all(t){return(0,c.Z)(t.data)}static sources(t){return null==t.lastUpdated?this.noDataOptions:t.data.sources.map(t=>({id:t,name:""===t||null==t?"Without source":t}))}static operatingSystems(t){return null==t.lastUpdated?this.noDataOptions:t.data.operatingSystems.map(t=>({id:t,name:""===t||null==t?"Without operating system":t}))}static messages(t){return null==t.lastUpdated?this.noDataOptions:t.data.messages.map(t=>({id:t,name:""===t||null==t?"Without message":t}))}static layers(t){return null==t.lastUpdated?this.noDataOptions:t.data.layers.map(t=>({id:t,name:""===t||null==t?"Without application layer":t}))}static devices(t){return null==t.lastUpdated?this.noDataOptions:t.data.devices.map(t=>({id:t,name:""===t||null==t?"Without device":t}))}static browsers(t){return null==t.lastUpdated?this.noDataOptions:t.data.browsers.map(t=>({id:t,name:""===t||null==t?"Without browser":t}))}static versions(t){return null==t.lastUpdated?this.noDataOptions:t.data.versions.map(t=>({id:t,name:""===t||null==t?"Without version":t}))}static areas(t){return null==t.lastUpdated?this.noDataOptions:t.data.areas.map(t=>({id:t,name:""===t||null==t?"Without area":t}))}static domains(t){return null==t.lastUpdated?this.noDataOptions:t.data.domains.map(t=>({id:t,name:""===t||null==t?"Without domain":t}))}static users(t){return null==t.lastUpdated?this.noDataOptions:t.data.users.map(t=>({id:t,name:""===t||null==t?"Without user":t}))}static userAgents(t){return null==t.lastUpdated?this.noDataOptions:t.data.agents.map(t=>({id:t,name:""===t||null==t?"Without user agent":t}))}}return t.noDataOptions=[{id:null,name:"No data available"}],(0,o.gn)([(0,p.Qf)([u.D])],t,"all",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"sources",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"operatingSystems",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"messages",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"layers",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"devices",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"browsers",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"versions",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"areas",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"domains",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"users",null),(0,o.gn)([(0,p.Qf)([u.D])],t,"userAgents",null),t})();var g=a(6820),m=a(779);let f=(()=>{class t{static results(t){return t.data.searchResults.map(t=>Object.assign(Object.assign({},t),{responseSize:Math.round(t.responseSize/1024*10)/10,requestSize:Math.round(t.requestSize/1024*10)/10}))}static charts(t){return(0,c.Z)(t.data.charts)}}return(0,o.gn)([(0,p.Qf)([m.T])],t,"results",null),(0,o.gn)([(0,p.Qf)([m.T])],t,"charts",null),t})();var h=a(9609),x=a(5366),Z=a(8203),y=a(2290);let w=(()=>{class t{transform(t,...e){var a;return null!=t&&""!==t?t:null!==(a=e[0])&&void 0!==a?a:"-"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=x.Yjl({name:"emptyGuard",type:t,pure:!0}),t})(),A=(()=>{class t{transform(t,...e){if(null==t)return null;const a=null==t?void 0:t.split(/(?:\r\n|\r|\n)/g);let s=a[0];return s.length>e[0]&&(s=s.substring(0,e[0])+"..."),a.length>1&&(s+="[click to expand]"),s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=x.Yjl({name:"formatHtml",type:t,pure:!0}),t})();function T(t,e){if(1&t&&(x.ynx(0),x._UZ(1,"smz-ui-chart",10),x._UZ(2,"smz-ui-chart",10),x._UZ(3,"smz-ui-chart",10),x._UZ(4,"smz-ui-chart",10),x._UZ(5,"smz-ui-chart",10),x._UZ(6,"smz-ui-chart",10),x._UZ(7,"smz-ui-chart",10),x._UZ(8,"smz-ui-chart",10),x.BQk()),2&t){const t=e.ngIf;x.xp6(1),x.Q6J("type",t[0].chart.type)("options",t[0].chart.config)("data",t[0].chart.data),x.xp6(1),x.Q6J("type",t[1].chart.type)("options",t[1].chart.config)("data",t[1].chart.data),x.xp6(1),x.Q6J("type",t[2].chart.type)("options",t[2].chart.config)("data",t[2].chart.data),x.xp6(1),x.Q6J("type",t[3].chart.type)("options",t[3].chart.config)("data",t[3].chart.data),x.xp6(1),x.Q6J("type",t[4].chart.type)("options",t[4].chart.config)("data",t[4].chart.data),x.xp6(1),x.Q6J("type",t[5].chart.type)("options",t[5].chart.config)("data",t[5].chart.data),x.xp6(1),x.Q6J("type",t[6].chart.type)("options",t[6].chart.config)("data",t[6].chart.data),x.xp6(1),x.Q6J("type",t[7].chart.type)("options",t[7].chart.config)("data",t[7].chart.data)}}function q(t,e){if(1&t&&(x.TgZ(0,"div",7),x.TgZ(1,"p-panel",8),x.TgZ(2,"div",9),x.YNc(3,T,9,24,"ng-container",5),x.ALo(4,"async"),x.qZA(),x.qZA(),x.qZA()),2&t){const t=x.oxw(2);x.xp6(1),x.Q6J("toggleable",!0),x.xp6(2),x.Q6J("ngIf",x.lcZ(4,2,t.charts$))}}function U(t,e){if(1&t&&(x.ynx(0),x.TgZ(1,"span",41),x._uU(2),x.qZA(),x.BQk()),2&t){const t=x.oxw(3).$implicit;x.xp6(2),x.Oqu(t.exceptionMessage)}}function L(t,e){if(1&t&&(x.TgZ(0,"span",41),x._uU(1),x.ALo(2,"formatHtml"),x.qZA()),2&t){const t=x.oxw(3).$implicit;x.xp6(1),x.Oqu(x.xi3(2,1,t.exceptionMessage,175))}}function v(t,e){if(1&t){const t=x.EpF();x.TgZ(0,"div",36),x.NdJ("click",function(){x.CHM(t);const e=x.oxw(2).$implicit;return x.oxw(3).toggleExpansion(e,"message")}),x.TgZ(1,"div",37),x.TgZ(2,"span"),x._UZ(3,"i",38),x._uU(4,"Stacktrace"),x.qZA(),x.YNc(5,U,3,1,"ng-container",39),x.YNc(6,L,3,4,"ng-template",null,40,x.W1O),x.qZA(),x.qZA()}if(2&t){const t=x.MAs(7),e=x.oxw(2).$implicit;x.xp6(5),x.Q6J("ngIf",1==e.messageExpanded)("ngIfElse",t)}}function _(t,e){if(1&t&&(x.ynx(0),x.TgZ(1,"span",43),x._uU(2),x.qZA(),x.BQk()),2&t){const t=x.oxw(3).$implicit;x.xp6(2),x.Oqu(t.stackTrace)}}function b(t,e){if(1&t&&(x.TgZ(0,"span",43),x._uU(1),x.ALo(2,"formatHtml"),x.qZA()),2&t){const t=x.oxw(3).$implicit;x.xp6(1),x.Oqu(x.xi3(2,1,t.stackTrace,175))}}function S(t,e){if(1&t){const t=x.EpF();x.TgZ(0,"div",36),x.NdJ("click",function(){x.CHM(t);const e=x.oxw(2).$implicit;return x.oxw(3).toggleExpansion(e,"stacktrace")}),x.TgZ(1,"div",37),x.TgZ(2,"span"),x._UZ(3,"i",38),x._uU(4,"Message"),x.qZA(),x.YNc(5,_,3,1,"ng-container",39),x.YNc(6,b,3,4,"ng-template",null,42,x.W1O),x.qZA(),x.qZA()}if(2&t){const t=x.MAs(7),e=x.oxw(2).$implicit;x.xp6(5),x.Q6J("ngIf",1==e.stacktraceExpanded)("ngIfElse",t)}}function E(t,e){if(1&t&&(x.ynx(0),x.TgZ(1,"span",43),x._uU(2),x.qZA(),x.BQk()),2&t){const t=x.oxw(3).$implicit;x.xp6(2),x.Oqu(t.inputData)}}function O(t,e){if(1&t&&(x.TgZ(0,"span",43),x._uU(1),x.qZA()),2&t){const t=x.oxw(6);x.xp6(1),x.Oqu(t.emptyObject)}}function I(t,e){if(1&t){const t=x.EpF();x.TgZ(0,"div",44),x.NdJ("click",function(){x.CHM(t);const e=x.oxw(2).$implicit;return x.oxw(3).toggleExpansion(e,"input")}),x.TgZ(1,"div",37),x.TgZ(2,"span"),x._UZ(3,"i",38),x._uU(4,"Input data"),x.qZA(),x.YNc(5,E,3,1,"ng-container",39),x.YNc(6,O,2,1,"ng-template",null,45,x.W1O),x.qZA(),x.qZA()}if(2&t){const t=x.MAs(7),e=x.oxw(2).$implicit;x.xp6(5),x.Q6J("ngIf",1==e.inputExpanded)("ngIfElse",t)}}function Q(t,e){if(1&t&&(x.ynx(0),x.TgZ(1,"div",15),x.TgZ(2,"div",16),x.TgZ(3,"div",17),x.TgZ(4,"span"),x._UZ(5,"i",18),x._uU(6),x.ALo(7,"date"),x.qZA(),x.TgZ(8,"span"),x._UZ(9,"i",19),x._uU(10),x.ALo(11,"date"),x.qZA(),x.qZA(),x.TgZ(12,"div",20),x.TgZ(13,"span"),x._UZ(14,"i",21),x._uU(15),x.ALo(16,"emptyGuard"),x.qZA(),x.TgZ(17,"span"),x._UZ(18,"i",22),x._uU(19),x.ALo(20,"emptyGuard"),x.qZA(),x.TgZ(21,"span"),x._UZ(22,"i",23),x._uU(23),x.ALo(24,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(25,"div",24),x.TgZ(26,"span"),x._UZ(27,"i",25),x._uU(28),x.ALo(29,"emptyGuard"),x.qZA(),x.TgZ(30,"span"),x._UZ(31,"i",26),x._uU(32),x.ALo(33,"emptyGuard"),x.qZA(),x.TgZ(34,"span"),x._UZ(35,"i",27),x._uU(36),x.ALo(37,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(38,"div",20),x.TgZ(39,"span"),x._UZ(40,"i",28),x._uU(41),x.ALo(42,"emptyGuard"),x.qZA(),x.TgZ(43,"span"),x._UZ(44,"i",29),x._uU(45),x.ALo(46,"emptyGuard"),x.qZA(),x.qZA(),x.TgZ(47,"div",30),x.TgZ(48,"span",31),x._UZ(49,"i",32),x._uU(50),x.ALo(51,"formatHtml"),x.qZA(),x.TgZ(52,"span",31),x._UZ(53,"i",33),x._uU(54),x.ALo(55,"emptyGuard"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(56,v,8,2,"div",34),x.YNc(57,S,8,2,"div",34),x.YNc(58,I,8,2,"div",35),x.BQk()),2&t){const t=x.oxw().$implicit;x.xp6(6),x.Oqu(x.xi3(7,16,t.timestamp,"dd/MM/yyyy")),x.xp6(4),x.Oqu(x.xi3(11,19,t.timestamp,"HH:mm:ss")),x.xp6(5),x.Oqu(x.xi3(16,22,t.applicationVersion,"-")),x.xp6(4),x.Oqu(x.xi3(20,25,t.applicationLayer,"-")),x.xp6(4),x.Oqu(x.xi3(24,28,t.applicationArea,"-")),x.xp6(5),x.Oqu(x.xi3(29,31,t.clientDevice,"-")),x.xp6(4),x.AsE("",x.xi3(33,34,t.clientOperatingSystem,"-")," - ",t.clientOperatingSystemVersion,""),x.xp6(4),x.Oqu(x.xi3(37,37,null==t.clientBrowser?null:t.clientBrowser.split(".")[0],"-")),x.xp6(5),x.Oqu(x.xi3(42,40,t.username,"Anonymous")),x.xp6(4),x.Oqu(x.xi3(46,43,t.domain,"Without domain")),x.xp6(5),x.Oqu(x.xi3(51,46,t.exceptionSource,175)),x.xp6(4),x.Oqu(x.xi3(55,49,t.extraData,"-")),x.xp6(2),x.Q6J("ngIf",null!=t.exceptionMessage&&""!==t.exceptionMessage),x.xp6(1),x.Q6J("ngIf",null!=t.stackTrace&&""!==t.stackTrace),x.xp6(1),x.Q6J("ngIf",null!=t.inputData&&""!==t.inputData)}}function D(t,e){1&t&&(x.ynx(0,13),x.YNc(1,Q,59,52,"ng-container",14),x.BQk()),2&t&&(x.Q6J("ngSwitch",e.col.field),x.xp6(1),x.Q6J("ngSwitchCase","timestamp"))}function N(t,e){if(1&t&&(x.TgZ(0,"div",7),x.TgZ(1,"smz-ui-table",11),x.YNc(2,D,2,2,"ng-template",12),x.qZA(),x.qZA()),2&t){const t=x.oxw().ngIf,e=x.oxw();x.xp6(1),x.Q6J("items",t)("state",e.tableConfig)}}function k(t,e){if(1&t&&(x.ynx(0),x.YNc(1,q,5,4,"div",6),x.YNc(2,N,3,2,"div",6),x.BQk()),2&t){const t=e.ngIf;x.xp6(1),x.Q6J("ngIf",null!=t&&t.length>0),x.xp6(1),x.Q6J("ngIf",null!=t&&t.length>0)}}const M=h;let C=(()=>{let t=class{constructor(t){this.store=t,this.formConfig=null,this.tableConfig=null,this.emptyObject="{...}"}ngOnInit(){this.setupForm(),this.setupTable()}setupTable(){this.tableConfig=(new i.X$1).usePagination().setPaginationDefaultRows(10).setPaginationPageOptions([25,50,100]).useStrippedStyle().columns().custom("timestamp","RESULTS","9em").disableFilter().disableSort().columns.table.build()}setupForm(){const t={propertyName:"dateFrom",type:i.rc7.CALENDAR,name:"From",defaultValue:M(new Date).subtract(30,"days").toDate(),touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},e={propertyName:"dateTo",type:i.rc7.CALENDAR,name:"To",defaultValue:new Date,touchUI:!1,focusTrap:!0,keepInvalid:!0,showButtonBar:!1,showOnFocus:!1,showIcon:!0,template:{extraLarge:{row:"col-2"}}},a={propertyName:"versions",type:i.rc7.MULTI_SELECT,name:"Application Versions",validatorsPreset:{isRequired:!1},defaultLabel:"All versions",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.versions),template:{extraLarge:{row:"col-2"}}},s={propertyName:"layers",type:i.rc7.MULTI_SELECT,name:"Layers",validatorsPreset:{isRequired:!1},defaultLabel:"All application layers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.layers),template:{extraLarge:{row:"col-2"}}},n={propertyName:"areas",type:i.rc7.MULTI_SELECT,name:"Application Areas",validatorsPreset:{isRequired:!1},defaultLabel:"All areas",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.areas),template:{extraLarge:{row:"col-2"}}},r={propertyName:"domains",type:i.rc7.MULTI_SELECT,name:"Domains",validatorsPreset:{isRequired:!1},defaultLabel:"All domains",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.domains),template:{extraLarge:{row:"col-2"}}},o={propertyName:"users",type:i.rc7.MULTI_SELECT,name:"Users",validatorsPreset:{isRequired:!1},defaultLabel:"All users",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.users),template:{extraLarge:{row:"col-2"}}},l={propertyName:"browsers",type:i.rc7.MULTI_SELECT,name:"Browsers",validatorsPreset:{isRequired:!1},defaultLabel:"All browsers",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.browsers),template:{extraLarge:{row:"col-3"}}},p={propertyName:"agents",type:i.rc7.MULTI_SELECT,name:"User Agents",validatorsPreset:{isRequired:!1},defaultLabel:"All user agents",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.userAgents),template:{extraLarge:{row:"col-3"}}},c={propertyName:"devices",type:i.rc7.MULTI_SELECT,name:"Devices",validatorsPreset:{isRequired:!1},defaultLabel:"All devices",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.devices),template:{extraLarge:{row:"col-2"}}},u={propertyName:"operatingSystems",type:i.rc7.MULTI_SELECT,name:"Operating Systems",validatorsPreset:{isRequired:!1},defaultLabel:"All operating systems",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.operatingSystems),template:{extraLarge:{row:"col-2"}}},g={propertyName:"sources",type:i.rc7.MULTI_SELECT,name:"Sources",validatorsPreset:{isRequired:!1},defaultLabel:"All sources",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.sources),template:{extraLarge:{row:"col-3"}}},m={propertyName:"messages",type:i.rc7.MULTI_SELECT,name:"Messages",validatorsPreset:{isRequired:!1},defaultLabel:"All messages",defaultValue:null,showFilter:!0,options:this.store.selectSnapshot(d.messages),template:{extraLarge:{row:"col-6"}}};this.formConfig={behaviors:{flattenResponse:!0,avoidFocusOnLoad:!0},groups:[{name:null,showName:!1,children:[t,e,a,s,n,r,o,l,p,c,u,g,m,{propertyName:"text",type:i.rc7.TEXT,name:"Contains Text",validatorsPreset:{isRequired:!1},defaultValue:null,template:{extraLarge:{row:"col-3"}}}],template:{extraLarge:{row:"col-12"}}}]}}search(t){const e=t.getData().data;for(const a in e)a.endsWith("Ids")&&(e[a.substring(0,a.length-3)]=e[a],delete e[a]);this.store.dispatch(new g.Z.Search(e))}toggleExpansion(t,e){t[`${e}Expanded`]=null==t[`${e}Expanded`]||!t[`${e}Expanded`]}};return t.\u0275fac=function(e){return new(e||t)(x.Y36(p.yh))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-search-page"]],decls:7,vars:4,consts:[["header","SEARCH FILTER"],[3,"config"],["searchForm",""],[1,"flex","flex-row-reverse","mr-3"],["pButton","","type","button","label","Search",3,"click"],[4,"ngIf"],["class","p-mt-4",4,"ngIf"],[1,"p-mt-4"],["header","QUICK OVERVIEW",3,"toggleable"],[1,"grid","grid-cols-8"],[3,"type","options","data"],[3,"items","state"],["pTemplate","content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"grid","grid-rows-1"],[1,"grid","grid-cols-12","gap-4"],[1,"grid","grid-rows-3","col-span-1","gap-2"],[1,"far","fa-calendar-alt","icon"],[1,"fas","fa-clock","icon"],[1,"grid","grid-rows-3","col-span-2","gap-2"],[1,"fas","fas","fa-code-branch","icon"],[1,"fas","fa-layer-group","icon"],[1,"fas","fa-sitemap","icon"],[1,"grid","grid-rows-3","col-span-3","gap-2"],[1,"fas","fa-tablet-alt","icon"],[1,"fab","fa-windows","icon"],[1,"fas","fa-globe","icon"],[1,"fas","fa-user","icon"],[1,"fas","fa-users","icon"],[1,"grid","grid-rows-3","col-span-4","gap-2"],[1,"break-all"],[1,"fas","fa-project-diagram","icon"],[1,"fas","fa-info-circle","icon"],["class","grid grid-rows-1 cursor-pointer mb-2.5",3,"click",4,"ngIf"],["class","grid grid-rows-1 cursor-pointer",3,"click",4,"ngIf"],[1,"grid","grid-rows-1","cursor-pointer","mb-2.5",3,"click"],[1,"grid","grid-cols-1"],[1,"fas","fa-bug","icon"],[4,"ngIf","ngIfElse"],["elseMessageTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","font-mono","text-sm"],["elseStacktraceTemplate",""],[1,"whitespace-pre-wrap","text-gray-500","text-sm","font-mono"],[1,"grid","grid-rows-1","cursor-pointer",3,"click"],["elseInputTemplate",""]],template:function(t,e){if(1&t){const t=x.EpF();x.TgZ(0,"p-panel",0),x._UZ(1,"smz-form-group",1,2),x.TgZ(3,"div",3),x.TgZ(4,"button",4),x.NdJ("click",function(){x.CHM(t);const a=x.MAs(2);return e.search(a)}),x.qZA(),x.qZA(),x.qZA(),x.YNc(5,k,3,2,"ng-container",5),x.ALo(6,"async")}2&t&&(x.xp6(1),x.Q6J("config",e.formConfig),x.xp6(4),x.Q6J("ngIf",x.lcZ(6,2,e.results$)))},directives:[Z.s,i.HK$,r.Hq,n.O5,i.Tmf,i.aYM,y.jx,n.RF,n.n9],pipes:[n.Ov,n.uU,w,A],styles:["app-search-page .icon{min-width:24px}"],encapsulation:2}),(0,o.gn)([(0,p.Ph)(f.results)],t.prototype,"results$",void 0),(0,o.gn)([(0,p.Ph)(f.charts)],t.prototype,"charts$",void 0),t=(0,o.gn)([(0,l.c)()],t),t})();var J=a(8751),F=a(3464),R=a(9208);const $=[{path:"",children:[{path:F.$q+"/"+F.xJ,canActivate:[i.XFF],component:C,data:{layout:{mode:"menu-only",contentPadding:"2em"},title:"Search",appArea:"search",clearReusableRoutes:!0,requiredStates:[u.O]}}]}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({providers:[],imports:[[n.ez,s.Bz.forChild($),r.hJ,i.Z4r,Z.Q,i.P$2,i.Yel,J.d,R.Ie]]}),t})()}}]);